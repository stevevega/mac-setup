{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/UserProcess/Booking/Step/Booking.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\UserProcess\\Booking\\Step","location":[11,0,11,38]},{"kind":1,"name":"CalendarDate","modifiers":4096,"location":[13,5,13,34],"associated":[{"kind":1,"name":"HH\\Calendar\\Util\\CalendarDate"}]},{"kind":1,"name":"Doctor","modifiers":4096,"location":[14,5,14,14],"associated":[{"kind":1,"name":"HH\\Doctor"}]},{"kind":1,"name":"Language","modifiers":4096,"location":[15,5,15,16],"associated":[{"kind":1,"name":"HH\\Language"}]},{"kind":1,"name":"Treatment","modifiers":4096,"location":[16,5,16,17],"associated":[{"kind":1,"name":"HH\\Treatment"}]},{"kind":1,"name":"BookingRender","modifiers":4096,"location":[17,5,17,48],"associated":[{"kind":1,"name":"HH\\UI\\Booking\\Step\\Booking"}]},{"kind":1,"name":"ABookingStep","modifiers":4096,"location":[18,5,18,40],"associated":[{"kind":1,"name":"HH\\UserProcess\\Booking\\ABookingStep"}]},{"kind":1,"name":"BookingStatus","modifiers":4096,"location":[19,5,19,46],"associated":[{"kind":1,"name":"HH\\UserProcess\\Booking\\Util\\BookingStatus"}]},{"kind":1,"name":"Date","modifiers":4096,"location":[20,5,20,17],"associated":[{"kind":1,"name":"HH\\Util\\Date"}]},{"kind":1,"name":"HHWidgets","modifiers":4096,"location":[21,5,21,28],"associated":[{"kind":1,"name":"HH\\Widgets"}]},{"kind":1,"name":"App","modifiers":4096,"location":[22,5,22,19],"associated":[{"kind":1,"name":"Kima\\Prime\\App"}]},{"kind":1,"name":"AppointmentModel","modifiers":4096,"location":[23,5,23,42],"associated":[{"kind":1,"name":"Model\\Appointment"}]},{"kind":1,"name":"CalendarModel","modifiers":4096,"location":[24,5,24,36],"associated":[{"kind":1,"name":"Model\\Calendar"}]},{"kind":1,"name":"BookingModel","modifiers":4096,"location":[25,5,25,43],"associated":[{"kind":1,"name":"Model\\Calendar\\Booking"}]},{"kind":1,"name":"DoctorModel","modifiers":4096,"location":[26,5,26,32],"associated":[{"kind":1,"name":"Model\\Doctor"}]},{"kind":1,"name":"DoctorTreatmentModel","modifiers":4096,"location":[27,5,27,51],"associated":[{"kind":1,"name":"Model\\Doctor\\Treatment"}]},{"kind":1,"name":"EventRecordModel","modifiers":4096,"location":[28,5,28,43],"associated":[{"kind":1,"name":"Model\\Event\\Record"}]},{"kind":1,"name":"HH\\UserProcess\\Booking\\Step\\Booking","modifiers":8,"location":[33,0,298,1],"associated":[{"kind":1,"name":"HH\\UserProcess\\Booking\\ABookingStep"}],"description":"The first step of the booking process is defined here","children":[{"kind":1024,"name":"ERROR_INVALID_CALENDAR","modifiers":1,"location":[38,10,38,53],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'Invalid calendar'"},{"kind":1024,"name":"ERROR_INVALID_AVAILABILITY","modifiers":1,"location":[39,10,39,66],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'Invalid availability slot'"},{"kind":1024,"name":"ERROR_INVALID_DOCTOR","modifiers":1,"location":[40,10,40,49],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'Invalid doctor'"},{"kind":1024,"name":"ERROR_INVALID_DATETIME","modifiers":1,"location":[41,10,41,49],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'Invalid date'"},{"kind":1024,"name":"R_DATETIME","modifiers":1,"location":[46,10,46,26],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'t'"},{"kind":1024,"name":"R_ID_CALENDAR_EVENT","modifiers":1,"location":[47,10,47,38],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'scid'"},{"kind":1024,"name":"R_ID_CLINIC","modifiers":1,"location":[48,10,48,28],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'cl'"},{"kind":1024,"name":"R_ID_DOCTOR","modifiers":1,"location":[49,10,49,27],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'d'"},{"kind":1024,"name":"R_ID_TREATMENT","modifiers":1,"location":[50,10,50,32],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'tid'"},{"kind":1024,"name":"R_REFERRER","modifiers":1,"location":[51,10,51,28],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'ref'"},{"kind":1024,"name":"R_IS_FIRST_TIME_PATIENT","modifiers":1,"location":[52,10,52,39],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'f'"},{"kind":1024,"name":"R_NOTES","modifiers":1,"location":[53,10,53,23],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'n'"},{"kind":1024,"name":"R_TIMESTAMP","modifiers":1,"location":[54,10,54,28],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'ts'"},{"kind":1024,"name":"DATETIME","modifiers":1,"location":[59,10,59,31],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'datetime'"},{"kind":1024,"name":"ID_CLINIC","modifiers":1,"location":[60,10,60,33],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'id_clinic'"},{"kind":1024,"name":"ID_DOCTOR","modifiers":1,"location":[61,10,61,33],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'id_doctor'"},{"kind":1024,"name":"ID_TREATMENT","modifiers":1,"location":[62,10,62,39],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'id_treatment'"},{"kind":1024,"name":"IS_FIRST_TIME_PATIENT","modifiers":1,"location":[63,10,63,57],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'is_first_time_patient'"},{"kind":1024,"name":"NOTES","modifiers":1,"location":[64,10,64,25],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'notes'"},{"kind":1024,"name":"TIMESTAMP","modifiers":1,"location":[65,10,65,33],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'timestamp'"},{"kind":1024,"name":"REFERRER","modifiers":1,"location":[66,10,66,31],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"'referrer'"},{"kind":1024,"name":"ALLOW_NOT_LOGGED_IN","modifiers":1,"location":[69,10,69,36],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"true"},{"kind":1024,"name":"HOUR","modifiers":1,"location":[71,10,71,21],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","value":"3600"},{"kind":16,"name":"$get_fields","modifiers":34,"location":[77,21,80,5],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","type":"array"},{"kind":16,"name":"$initial_booking_fields","modifiers":34,"location":[87,21,94,5],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","type":"array"},{"kind":16,"name":"$post_fields","modifiers":34,"location":[101,21,107,5],"scope":"HH\\UserProcess\\Booking\\Step\\Booking","type":"array"},{"kind":32,"name":"set_id_doctor","modifiers":1,"location":[114,4,120,5],"description":"Sets the doctor id","scope":"HH\\UserProcess\\Booking\\Step\\Booking","children":[{"kind":128,"name":"$id_doctor","location":[114,34,114,44],"scope":"set_id_doctor","type":"int"}]},{"kind":32,"name":"set_id_event","modifiers":1,"location":[128,4,135,5],"description":"Sets the calendar event id that defines the availability for this\nbooking object","scope":"HH\\UserProcess\\Booking\\Step\\Booking","children":[{"kind":128,"name":"$id_event","location":[128,33,128,42],"scope":"set_id_event","type":"int"}]},{"kind":32,"name":"set_datetime","modifiers":1,"location":[142,4,158,5],"description":"Sets the datetime of the booking","scope":"HH\\UserProcess\\Booking\\Step\\Booking","children":[{"kind":128,"name":"$datetime","location":[142,33,142,42],"description":"in a format parseable by CalendarDate","scope":"set_datetime","type":"string"}]},{"kind":32,"name":"set_source","modifiers":1,"location":[165,4,168,5],"description":"Sets the booking source","scope":"HH\\UserProcess\\Booking\\Step\\Booking","children":[{"kind":128,"name":"$val","location":[165,31,165,35],"scope":"set_source"}]},{"kind":32,"name":"get_step","modifiers":2,"location":[173,4,178,5],"description":"Processed the data needed to render the view for the current step","scope":"HH\\UserProcess\\Booking\\Step\\Booking","children":[{"kind":128,"name":"$view","location":[173,32,173,37],"scope":"get_step"}]},{"kind":32,"name":"process_step","modifiers":2,"location":[183,4,203,5],"description":"Processes the data passed by the user in the POST request","scope":"HH\\UserProcess\\Booking\\Step\\Booking"},{"kind":32,"name":"load_get_data","modifiers":2,"location":[208,4,221,5],"description":"Loads the booking object","scope":"HH\\UserProcess\\Booking\\Step\\Booking"},{"kind":32,"name":"create_new_booking","modifiers":4,"location":[226,4,264,5],"description":"Creates a \\Calendar\\Booking object from the request.","scope":"HH\\UserProcess\\Booking\\Step\\Booking"},{"kind":32,"name":"verify_calendar_ownership","modifiers":4,"location":[270,4,278,5],"description":"Verifies that the calendar event belongs to the doctor passed and sets\nan error if invalid","scope":"HH\\UserProcess\\Booking\\Step\\Booking"},{"kind":32,"name":"verify_appointment_time","modifiers":4,"location":[284,4,297,5],"description":"Verifies that the booking date is within the date of the event constraints,\nsets and error if invalid","scope":"HH\\UserProcess\\Booking\\Step\\Booking"}]}]}}