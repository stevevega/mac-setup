{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Util/Script/Maintenance/CalendarSubscriptionUpdate.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Util\\Script\\Maintenance","location":[11,0,11,37]},{"kind":1,"name":"AvailableQueue","modifiers":4096,"location":[13,5,13,41],"associated":[{"kind":1,"name":"HH\\Queue\\Available"}]},{"kind":1,"name":"QueueHandler","modifiers":4096,"location":[14,5,14,37],"associated":[{"kind":1,"name":"HH\\Queue\\Handler"}]},{"kind":1,"name":"SubscriptionUpdate","modifiers":4096,"location":[15,5,15,82],"associated":[{"kind":1,"name":"HH\\Request\\Handler\\CalendarSubscription\\Practice\\Update"}]},{"kind":1,"name":"ObjectRequest","modifiers":4096,"location":[16,5,16,44],"associated":[{"kind":1,"name":"HH\\Request\\Type\\Object"}]},{"kind":1,"name":"Transaction","modifiers":4096,"location":[17,5,17,30],"associated":[{"kind":1,"name":"Huli\\Database\\Transaction"}]},{"kind":1,"name":"TaskQueue","modifiers":4096,"location":[18,5,18,40],"associated":[{"kind":1,"name":"Huli\\Http\\Request\\Handler\\TaskQueue"}]},{"kind":1,"name":"CalendarModel","modifiers":4096,"location":[19,5,19,36],"associated":[{"kind":1,"name":"Model\\Calendar"}]},{"kind":1,"name":"DoctorModel","modifiers":4096,"location":[20,5,20,32],"associated":[{"kind":1,"name":"Model\\Doctor"}]},{"kind":1,"name":"stdClass","modifiers":4096,"location":[21,5,21,13],"associated":[{"kind":1,"name":"stdClass"}]},{"kind":1,"name":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","location":[29,0,253,1],"description":"Calendar subscription update library\nThe old fresque/resque structure was changed by an script that will update all the events\nfor the same doctor at once each certain time(This time is set by the script cronjob time).\nThis library get from the redis queue some events and update the calendar related","children":[{"kind":1024,"name":"DEFAULT_EVENTS_NUMBER","modifiers":1,"location":[34,10,34,37],"scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","value":"300"},{"kind":16,"name":"$script_controller","modifiers":4,"location":[40,12,40,30],"scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate"},{"kind":16,"name":"$events","modifiers":4,"location":[45,12,45,19],"scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate"},{"kind":16,"name":"$queue_handler","modifiers":4,"location":[52,12,52,26],"scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","type":"HH\\Queue\\Handler"},{"kind":16,"name":"$upload_handler","modifiers":4,"location":[59,12,59,27],"scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","type":"object"},{"kind":16,"name":"$transaction","modifiers":4,"location":[66,12,66,24],"scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","type":"Huli\\Database\\Transaction"},{"kind":32,"name":"__construct","modifiers":1,"location":[73,4,76,5],"description":"The script controller is passed as parameter in order to generate test for this library","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","children":[{"kind":128,"name":"$script_controller","location":[73,32,73,50],"scope":"__construct","type":"object"}]},{"kind":32,"name":"start","modifiers":1,"location":[83,4,110,5],"description":"Start the calendar subscription maintenance process","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","children":[{"kind":128,"name":"$event_number","location":[83,26,83,39],"scope":"start"}]},{"kind":32,"name":"set_queue_handler","modifiers":1,"location":[117,4,122,5],"description":"Set the class that will handle the calendar subscription queue","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","children":[{"kind":128,"name":"$queue_handler","location":[117,38,117,65],"scope":"set_queue_handler","typeSource":1,"type":"HH\\Queue\\Handler"}]},{"kind":32,"name":"set_upload_handler","modifiers":1,"location":[129,4,134,5],"description":"Set the upload handler file","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","children":[{"kind":128,"name":"$upload_handler","location":[129,39,129,54],"scope":"set_upload_handler","type":"object"}]},{"kind":32,"name":"get_transaction","modifiers":1,"location":[141,4,144,5],"description":"Get the application transaction","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","type":"Huli\\Database\\Transaction"},{"kind":32,"name":"set_transaction","modifiers":1,"location":[151,4,156,5],"description":"Set the application transaction","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","type":"Huli\\Database\\Transaction","children":[{"kind":128,"name":"$transaction","location":[151,36,151,60],"scope":"set_transaction","typeSource":1,"type":"Huli\\Database\\Transaction"}]},{"kind":32,"name":"get_queued_jobs","modifiers":4,"location":[163,4,171,5],"description":"Get the jobs from the calendar queue","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","type":"array"},{"kind":32,"name":"pop_jobs_from_the_queue","modifiers":4,"location":[176,4,185,5],"description":"Pop the processed jobs from the queue","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","children":[{"kind":128,"name":"$jobs","location":[176,45,176,50],"scope":"pop_jobs_from_the_queue"}]},{"kind":32,"name":"process_jobs","modifiers":4,"location":[194,4,252,5],"description":"Process each of the retrieved jobs from the calendar subscription queue","scope":"HH\\Util\\Script\\Maintenance\\CalendarSubscriptionUpdate","type":"bool","children":[{"kind":128,"name":"$items","location":[194,34,194,46],"scope":"process_jobs","type":"array"}]}]}]}}