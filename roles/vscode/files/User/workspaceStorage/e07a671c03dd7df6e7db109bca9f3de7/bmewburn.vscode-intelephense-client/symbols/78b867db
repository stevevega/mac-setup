{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Util/Aws/Thumbnail.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Util\\Aws","location":[11,0,11,22]},{"kind":1,"name":"CloudFrontClient","modifiers":4096,"location":[13,5,13,36],"associated":[{"kind":1,"name":"Aws\\CloudFront\\CloudFrontClient"}]},{"kind":1,"name":"S3Client","modifiers":4096,"location":[14,5,14,20],"associated":[{"kind":1,"name":"Aws\\S3\\S3Client"}]},{"kind":1,"name":"HHDate","modifiers":4096,"location":[15,5,15,27],"associated":[{"kind":1,"name":"HH\\Util\\Date"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[16,5,16,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"Config","modifiers":4096,"location":[17,5,17,20],"associated":[{"kind":1,"name":"Huli\\AWS\\Config"}]},{"kind":1,"name":"ContentType","modifiers":4096,"location":[18,5,18,34],"associated":[{"kind":1,"name":"Huli\\AWS\\Document\\ContentType"}]},{"kind":1,"name":"PlaceHolder","modifiers":4096,"location":[19,5,19,30],"associated":[{"kind":1,"name":"Huli\\AWS\\Enum\\PlaceHolder"}]},{"kind":1,"name":"Region","modifiers":4096,"location":[20,5,20,25],"associated":[{"kind":1,"name":"Huli\\AWS\\Enum\\Region"}]},{"kind":1,"name":"PublicThumbnail","modifiers":4096,"location":[21,5,21,39],"associated":[{"kind":1,"name":"Huli\\AWS\\Thumbnail\\PublicThumbnail"}]},{"kind":1,"name":"UrlSign","modifiers":4096,"location":[22,5,22,21],"associated":[{"kind":1,"name":"Huli\\AWS\\UrlSign"}]},{"kind":1,"name":"Error","modifiers":4096,"location":[23,5,23,15],"associated":[{"kind":1,"name":"Kima\\Error"}]},{"kind":1,"name":"KConfig","modifiers":4096,"location":[24,5,24,33],"associated":[{"kind":1,"name":"Kima\\Prime\\Config"}]},{"kind":1,"name":"KString","modifiers":4096,"location":[25,5,25,22],"associated":[{"kind":1,"name":"Kima\\Util\\KString"}]},{"kind":1,"name":"PatientDocumentModel","modifiers":4096,"location":[26,5,26,51],"associated":[{"kind":1,"name":"Model\\Patient\\Document"}]},{"kind":1,"name":"stdClass","modifiers":4096,"location":[27,5,27,13],"associated":[{"kind":1,"name":"stdClass"}]},{"kind":1,"name":"HH\\Util\\Aws\\Thumbnail","location":[34,0,408,1],"description":"Aws thumbnail generator libraries\nNOTE: BE AWARE THAT IF A NEW THUMBNAIL SIZE IS ADDED FOR ANY IMAGE OWNER TYPE, THIS NEW SIZE HAVE\nTO BE GENERATED MANUALLY ON THE BUCKET TOO","children":[{"kind":1024,"name":"ERROR_INVALID_SIZE","modifiers":1,"location":[39,10,39,94],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'Size %s not defined into the list of valid thumbnail size yet'"},{"kind":1024,"name":"EHR_DOC_THUMBNAIL_PATH_FORMAT","modifiers":1,"location":[44,10,44,60],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'thumbnail/%s.jpg'"},{"kind":1024,"name":"FILE_TMP_LOCATION","modifiers":1,"location":[49,10,49,37],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'/tmp/'"},{"kind":1024,"name":"HULI_FILE_KEY_FORMAT","modifiers":1,"location":[54,10,54,47],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'%s/%s/%s/%s/'"},{"kind":1024,"name":"HULI","modifiers":1,"location":[55,10,55,23],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'huli'"},{"kind":1024,"name":"FOLDER_PATH_LENGTH","modifiers":1,"location":[60,10,60,32],"scope":"HH\\Util\\Aws\\Thumbnail","value":"5"},{"kind":1024,"name":"W45_H45","modifiers":1,"location":[67,10,67,27],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'45x45'"},{"kind":1024,"name":"W115_H115","modifiers":1,"location":[68,10,68,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'115x115'"},{"kind":1024,"name":"W500_H250","modifiers":1,"location":[69,10,69,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'500x250'"},{"kind":1024,"name":"W120_H150","modifiers":1,"location":[70,10,70,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'120x150'"},{"kind":1024,"name":"W150_H150","modifiers":1,"location":[71,10,71,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'150x150'"},{"kind":1024,"name":"W300_H215","modifiers":1,"location":[72,10,72,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'300x215'"},{"kind":1024,"name":"W75_H50","modifiers":1,"location":[73,10,73,27],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'75x50'"},{"kind":1024,"name":"W95_H95","modifiers":1,"location":[74,10,74,27],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'95x95'"},{"kind":1024,"name":"W150_H180","modifiers":1,"location":[75,10,75,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'150x180'"},{"kind":1024,"name":"W150_H100","modifiers":1,"location":[76,10,76,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'150x100'"},{"kind":1024,"name":"W160_H160","modifiers":1,"location":[77,10,77,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'160x160'"},{"kind":1024,"name":"W75_H75","modifiers":1,"location":[78,10,78,27],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'75x75'"},{"kind":1024,"name":"W120_H120","modifiers":1,"location":[79,10,79,31],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'120x120'"},{"kind":1024,"name":"W420_H70","modifiers":1,"location":[80,10,80,29],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'420x70'"},{"kind":1024,"name":"W480_H80","modifiers":1,"location":[81,10,81,29],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'480x80'"},{"kind":1024,"name":"THUMBNAIL_SIZE","modifiers":1,"location":[86,10,102,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W45_H45 => [45, 45],\n        self::W115_H115 => [115, 115],\n        self::W500_H250 => [500, 250],\n        self::W120_H150 => [120, 150],\n        self::W150_H150 => [150, 150],\n        self::W75_H50 => [75, 50],\n        self::W95_H95 => [95, 95],\n        self::W150_H180 => [150, 180],\n        self::W300_H215 => [300, 215],\n        self::W150_H100 => [150, 100],\n        self::W160_H160 => [160, 160],\n        self::W75_H75 => [75, 75],\n        self::W120_H120 => [120, 120],\n        self::W420_H70 => [420, 70],\n        self::W480_H80 => [480, 80]\n    ]"},{"kind":1024,"name":"DOCTOR_PHOTO","modifiers":1,"location":[107,10,107,39],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'doctor/photo'"},{"kind":1024,"name":"CLINIC_PHOTO","modifiers":1,"location":[108,10,108,39],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'clinic/photo'"},{"kind":1024,"name":"SERVICE_PHOTO","modifiers":1,"location":[109,10,109,41],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'service/photo'"},{"kind":1024,"name":"BRANCH_PHOTO","modifiers":1,"location":[110,10,110,39],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'branch/photo'"},{"kind":1024,"name":"DOCTOR_IMAGES","modifiers":1,"location":[111,10,111,41],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'doctor/images'"},{"kind":1024,"name":"CLINIC_IMAGES","modifiers":1,"location":[112,10,112,41],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'clinic/images'"},{"kind":1024,"name":"PATIENT_PHOTO","modifiers":1,"location":[113,10,113,41],"scope":"HH\\Util\\Aws\\Thumbnail","value":"'patient/photo'"},{"kind":1024,"name":"IMAGES_OWNER_TYPES","modifiers":1,"location":[118,10,126,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::DOCTOR_PHOTO,\n        self::DOCTOR_IMAGES,\n        self::CLINIC_PHOTO,\n        self::CLINIC_IMAGES,\n        self::SERVICE_PHOTO,\n        self::BRANCH_PHOTO,\n        self::PATIENT_PHOTO\n    ]"},{"kind":1024,"name":"PATIENT_PHOTO_THUMB_SIZE","modifiers":1,"location":[132,10,135,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W45_H45,\n        self::W120_H120\n    ]"},{"kind":1024,"name":"DOCTOR_PHOTO_THUMB_SIZE","modifiers":1,"location":[141,10,146,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W45_H45,\n        self::W75_H75,\n        self::W120_H150,\n        self::W150_H180\n    ]"},{"kind":1024,"name":"DOCTOR_IMAGE_THUMB_SIZE","modifiers":1,"location":[152,10,155,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W115_H115,\n        self::W95_H95\n    ]"},{"kind":1024,"name":"CLINIC_PHOTO_THUMB_SIZE","modifiers":1,"location":[161,10,166,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W500_H250,\n        self::W45_H45,\n        self::W300_H215,\n        self::W150_H100\n    ]"},{"kind":1024,"name":"CLINIC_IMAGE_THUMB_SIZE","modifiers":1,"location":[172,10,175,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W115_H115,\n        self::W95_H95\n    ]"},{"kind":1024,"name":"BRANCH_PHOTO_THUMB_SIZE","modifiers":1,"location":[181,10,186,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W500_H250,\n        self::W75_H50,\n        self::W95_H95,\n        self::W160_H160\n    ]"},{"kind":1024,"name":"SERVICE_PHOTO_THUMB_SIZE","modifiers":1,"location":[192,10,196,5],"scope":"HH\\Util\\Aws\\Thumbnail","value":"[\n        self::W150_H150,\n        self::W45_H45,\n        self::W160_H160\n    ]"},{"kind":32,"name":"get_height","modifiers":1,"location":[205,4,212,5],"description":"Get the height of the thumbnail","scope":"HH\\Util\\Aws\\Thumbnail","type":"int","children":[{"kind":128,"name":"$size","location":[205,31,205,36],"scope":"get_height","type":"string"}]},{"kind":32,"name":"get_width","modifiers":1,"location":[221,4,228,5],"description":"Get the height of the thumbnail","scope":"HH\\Util\\Aws\\Thumbnail","type":"int","children":[{"kind":128,"name":"$size","location":[221,30,221,35],"scope":"get_width","type":"string"}]},{"kind":32,"name":"is_valid_size","modifiers":1,"location":[237,4,240,5],"description":"Verify if a thumbnail size is available","scope":"HH\\Util\\Aws\\Thumbnail","type":"bool","children":[{"kind":128,"name":"$size","location":[237,34,237,39],"scope":"is_valid_size","type":"string"}]},{"kind":32,"name":"is_valid_image_owner_type","modifiers":1,"location":[249,4,252,5],"description":"Verify if the object whose thumbnail will be generated is a valid image owner type","scope":"HH\\Util\\Aws\\Thumbnail","type":"bool","children":[{"kind":128,"name":"$type","location":[249,46,249,51],"scope":"is_valid_image_owner_type","type":"string"}]},{"kind":32,"name":"get_for_ehr_documents","modifiers":1,"location":[270,4,333,5],"description":"Get the ehr documents thumbnails\nVerify if the thumbnail was already created by lambda and save the thumbnail location if exists","scope":"HH\\Util\\Aws\\Thumbnail","type":"HH\\Util\\Aws\\signed","children":[{"kind":128,"name":"$id_patient_document","location":[271,8,271,28],"scope":"get_for_ehr_documents"},{"kind":128,"name":"$thumbnail","location":[272,8,272,18],"scope":"get_for_ehr_documents"},{"kind":128,"name":"$content_type","location":[273,8,273,21],"scope":"get_for_ehr_documents"},{"kind":128,"name":"$path","location":[274,8,274,13],"scope":"get_for_ehr_documents"},{"kind":128,"name":"$s3_client","location":[275,8,275,27],"scope":"get_for_ehr_documents","typeSource":1,"type":"Aws\\S3\\S3Client"},{"kind":128,"name":"$config","location":[276,8,276,23],"scope":"get_for_ehr_documents","typeSource":1,"type":"Kima\\Prime\\Config"},{"kind":128,"name":"$render_default","location":[277,8,277,31],"scope":"get_for_ehr_documents","value":"false","type":"mixed"}]},{"kind":32,"name":"get_huli_images_path","modifiers":1,"location":[342,4,351,5],"description":"Get the s3 path given to uploaded huli images","scope":"HH\\Util\\Aws\\Thumbnail","type":"string","children":[{"kind":128,"name":"$image_owner_type","location":[342,41,342,58],"scope":"get_huli_images_path","type":"string"}]},{"kind":32,"name":"get_path_for_ehr_documents","modifiers":1,"location":[360,4,368,5],"description":"Get the path of a thumbnail generated for ehr documents","scope":"HH\\Util\\Aws\\Thumbnail","type":"string","children":[{"kind":128,"name":"$path","location":[360,47,360,52],"scope":"get_path_for_ehr_documents","type":"string"}]},{"kind":32,"name":"get_thumbnail_size_for_request","modifiers":1,"location":[378,4,407,5],"description":"Get the thumbnail objects to be set on the aws image save request","scope":"HH\\Util\\Aws\\Thumbnail","children":[{"kind":128,"name":"$session","location":[379,8,379,25],"scope":"get_thumbnail_size_for_request","typeSource":1,"type":"Huli\\Authentication\\ISession"},{"kind":128,"name":"$image","location":[380,8,380,14],"scope":"get_thumbnail_size_for_request","type":"mixed"},{"kind":128,"name":"$photo","location":[381,8,381,14],"description":"post parameter","scope":"get_thumbnail_size_for_request","type":"string"},{"kind":128,"name":"$thumbnail_size","location":[382,8,382,29],"scope":"get_thumbnail_size_for_request","type":"array"}]}]}]}}