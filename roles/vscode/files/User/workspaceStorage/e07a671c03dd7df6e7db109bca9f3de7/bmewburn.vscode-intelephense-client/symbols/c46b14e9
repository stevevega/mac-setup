{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Calendar/Event/Appointment/PatientValidator.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Calendar\\Event\\Appointment","location":[11,0,11,40]},{"kind":1,"name":"DateInterval","modifiers":4096,"location":[13,5,13,17],"associated":[{"kind":1,"name":"DateInterval"}]},{"kind":1,"name":"HHInstance","modifiers":4096,"location":[14,5,14,30],"associated":[{"kind":1,"name":"HH\\Instance"}]},{"kind":1,"name":"HtmlTags","modifiers":4096,"location":[15,5,15,24],"associated":[{"kind":1,"name":"HH\\UI\\Util\\HtmlTags"}]},{"kind":1,"name":"Phone","modifiers":4096,"location":[16,5,16,21],"associated":[{"kind":1,"name":"HH\\UI\\Util\\Phone"}]},{"kind":1,"name":"Date","modifiers":4096,"location":[17,5,17,17],"associated":[{"kind":1,"name":"HH\\Util\\Date"}]},{"kind":1,"name":"L10n","modifiers":4096,"location":[18,5,18,14],"associated":[{"kind":1,"name":"Kima\\L10n"}]},{"kind":1,"name":"App","modifiers":4096,"location":[19,5,19,19],"associated":[{"kind":1,"name":"Kima\\Prime\\App"}]},{"kind":1,"name":"AppointmentModel","modifiers":4096,"location":[20,5,20,42],"associated":[{"kind":1,"name":"Model\\Appointment"}]},{"kind":1,"name":"DoctorPhoneModel","modifiers":4096,"location":[21,5,21,43],"associated":[{"kind":1,"name":"Model\\Doctor\\Phone"}]},{"kind":1,"name":"HH\\Calendar\\Event\\Appointment\\PatientValidator","modifiers":8,"location":[26,0,169,1],"description":"This enum class validates the condition of patient appointments","children":[{"kind":1024,"name":"MAX_APPT_COUNT_DAY","modifiers":1,"location":[31,10,31,32],"scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","value":"3"},{"kind":1024,"name":"ERROR_ALREADY_ANOTHER_BOOKED","modifiers":1,"location":[32,10,32,90],"scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","value":"'Already booked with other doctor different time'"},{"kind":1024,"name":"ERROR_ALREADY_BOOKED","modifiers":1,"location":[33,10,33,61],"scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","value":"'Already booked with doctor'"},{"kind":1024,"name":"ERROR_MORE_3_APPTS","modifiers":1,"location":[34,10,34,64],"scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","value":"'Error, more than 3 appointments'"},{"kind":1024,"name":"ERROR_RESCHEDULE_24H_BEFORE_APPT","modifiers":1,"location":[35,10,35,83],"scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","value":"'error_reschedule_time_forbidden_appt'"},{"kind":32,"name":"validate_rescheduling_date","modifiers":1,"location":[44,4,69,5],"description":"Validates that the appointment exists within the restriction of 24 hours.","scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","type":"HH\\Calendar\\Event\\Appointment\\String","children":[{"kind":128,"name":"$appt","location":[44,47,44,69],"scope":"validate_rescheduling_date","typeSource":1,"type":"Model\\Appointment"}]},{"kind":32,"name":"verify_valid_appointment","modifiers":1,"location":[84,4,105,5],"description":"Checks whether the appointment being booked or recheduled falls\nwithin the restriction on the number of appointments for a single user","scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","type":"string","children":[{"kind":128,"name":"$id_patient","location":[85,8,85,19],"description":"the id of the patient","scope":"verify_valid_appointment","type":"int"},{"kind":128,"name":"$start_date","location":[86,8,86,19],"scope":"verify_valid_appointment","type":"string"},{"kind":128,"name":"$time_from","location":[87,8,87,18],"scope":"verify_valid_appointment","type":"string"},{"kind":128,"name":"$id_doctor","location":[88,8,88,18],"scope":"verify_valid_appointment","type":"int"},{"kind":128,"name":"$exclude","location":[89,8,89,23],"scope":"verify_valid_appointment","value":"null","type":"null|mixed"}]},{"kind":32,"name":"set_reschedule_time_forbidden_error","modifiers":4,"location":[115,4,140,5],"description":"Generates the proper error message when the user tries to reschedule an appointment 1h before.\nThe message should include contact information for the user.","scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","type":"HH\\Calendar\\Event\\Appointment\\String","children":[{"kind":128,"name":"$appt","location":[115,57,115,79],"scope":"set_reschedule_time_forbidden_error","typeSource":1,"type":"Model\\Appointment"}]},{"kind":32,"name":"verify_appointment_unique","modifiers":4,"location":[152,4,168,5],"description":"Verifies whether the appointment falls with in the uniqueness constrains.","scope":"HH\\Calendar\\Event\\Appointment\\PatientValidator","type":"string","children":[{"kind":128,"name":"$existing_appts","location":[152,47,152,62],"description":"array with current appointments","scope":"verify_appointment_unique","type":"array"},{"kind":128,"name":"$id_doctor","location":[152,64,152,74],"scope":"verify_appointment_unique","type":"int"},{"kind":128,"name":"$time_from","location":[152,76,152,86],"scope":"verify_appointment_unique","type":"string"},{"kind":128,"name":"$start_date","location":[152,88,152,99],"scope":"verify_appointment_unique","type":"mixed"}]}]}]}}