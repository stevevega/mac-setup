{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/UserProcess/Booking/ABookingStep.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\UserProcess\\Booking","location":[11,0,11,33]},{"kind":1,"name":"PatientValidator","modifiers":4096,"location":[13,5,13,51],"associated":[{"kind":1,"name":"HH\\Calendar\\Event\\Appointment\\PatientValidator"}]},{"kind":1,"name":"LoginRequest","modifiers":4096,"location":[14,5,14,42],"associated":[{"kind":1,"name":"HH\\User\\Request\\Login"}]},{"kind":1,"name":"AStep","modifiers":4096,"location":[15,5,15,25],"associated":[{"kind":1,"name":"HH\\UserProcess\\AStep"}]},{"kind":1,"name":"BookingStatus","modifiers":4096,"location":[16,5,16,46],"associated":[{"kind":1,"name":"HH\\UserProcess\\Booking\\Util\\BookingStatus"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[17,5,17,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"Request","modifiers":4096,"location":[18,5,18,22],"associated":[{"kind":1,"name":"Kima\\Http\\Request"}]},{"kind":1,"name":"BookingModel","modifiers":4096,"location":[19,5,19,43],"associated":[{"kind":1,"name":"Model\\Calendar\\Booking"}]},{"kind":1,"name":"PatientModel","modifiers":4096,"location":[20,5,20,34],"associated":[{"kind":1,"name":"Model\\Patient"}]},{"kind":1,"name":"HH\\UserProcess\\Booking\\ABookingStep","modifiers":16,"location":[26,0,259,1],"associated":[{"kind":1,"name":"HH\\UserProcess\\AStep"}],"description":"This class serves as the base for all the class that deal with the\nsteps in the appointment creation process","children":[{"kind":1024,"name":"ERROR_ALREADY_ANOTHER_BOOKED","modifiers":1,"location":[31,10,31,90],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'Already booked with other doctor different time'"},{"kind":1024,"name":"ERROR_ALREADY_BOOKED","modifiers":1,"location":[32,10,32,61],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'Already booked with doctor'"},{"kind":1024,"name":"ERROR_COMPLETED","modifiers":1,"location":[33,10,33,58],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'Booking is already completed'"},{"kind":1024,"name":"ERROR_MORE_3_APPTS","modifiers":1,"location":[34,10,34,64],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'Error, more than 3 appointments'"},{"kind":1024,"name":"ERROR_NO_BOOKING","modifiers":1,"location":[35,10,35,53],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'Unable to find booking'"},{"kind":1024,"name":"ERROR_NOT_PERMITTED","modifiers":1,"location":[36,10,36,71],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'User is not allowed to change booking'"},{"kind":1024,"name":"ERROR_KEY_ALREADY_ANOTHER_BOOKED","modifiers":1,"location":[41,10,41,86],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'error_msg_already_booked_another_doctor'"},{"kind":1024,"name":"ERROR_KEY_ALREADY_BOOKED","modifiers":1,"location":[42,10,42,63],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'error_msg_already_booked'"},{"kind":1024,"name":"ERROR_KEY_COMPLETED","modifiers":1,"location":[43,10,43,58],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'error_msg_appt_completed'"},{"kind":1024,"name":"ERROR_KEY_MORE_3_APPTS","modifiers":1,"location":[44,10,44,61],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'error_msg_too_many_appts'"},{"kind":1024,"name":"STEP_TYPE_KEY","modifiers":1,"location":[49,10,49,35],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'booking'"},{"kind":1024,"name":"R_ID_BOOKING","modifiers":1,"location":[54,10,54,30],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'bid'"},{"kind":1024,"name":"ID_BOOKING","modifiers":1,"location":[59,10,59,35],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"'id_booking'"},{"kind":1024,"name":"CHECK_UNIQUE","modifiers":1,"location":[62,10,62,29],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"true"},{"kind":1024,"name":"ALLOW_NOT_LOGGED_IN","modifiers":1,"location":[65,10,65,37],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"false"},{"kind":1024,"name":"ALLOW_COMPLETED","modifiers":1,"location":[67,10,67,33],"scope":"HH\\UserProcess\\Booking\\ABookingStep","value":"false"},{"kind":16,"name":"$booking","modifiers":2,"location":[74,14,74,29],"scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"Calendar\\Booking"},{"kind":16,"name":"$patient","modifiers":2,"location":[81,14,81,22],"scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"Patient"},{"kind":16,"name":"$get_fields","modifiers":34,"location":[88,21,91,5],"scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"array"},{"kind":16,"name":"$post_fields","modifiers":34,"location":[98,21,101,5],"scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"array"},{"kind":32,"name":"__construct","modifiers":1,"location":[109,4,113,5],"description":"Constructor","scope":"HH\\UserProcess\\Booking\\ABookingStep","children":[{"kind":128,"name":"$session","location":[109,32,109,49],"scope":"__construct","typeSource":1,"type":"Huli\\Authentication\\ISession"},{"kind":128,"name":"$instance","location":[109,51,109,60],"scope":"__construct","type":"mixed"},{"kind":128,"name":"$module","location":[109,62,109,69],"scope":"__construct","type":"mixed"}]},{"kind":32,"name":"next_step_url","modifiers":1,"location":[120,4,123,5],"description":"Retrieves the url of the next step","scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"string"},{"kind":32,"name":"booking","modifiers":1,"location":[130,4,133,5],"description":"Returns the current booking object","scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"Calendar\\Booking"},{"kind":32,"name":"patient","modifiers":1,"location":[140,4,143,5],"description":"Returns the current patient object","scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"Patient"},{"kind":32,"name":"load_patient","modifiers":2,"location":[148,4,154,5],"description":"Load the patient information for the current user","scope":"HH\\UserProcess\\Booking\\ABookingStep"},{"kind":32,"name":"load_get_data","modifiers":2,"location":[159,4,162,5],"description":"Loads the common data for a GET request","scope":"HH\\UserProcess\\Booking\\ABookingStep"},{"kind":32,"name":"load_post_data","modifiers":2,"location":[167,4,170,5],"description":"Loads the common data for a POST request","scope":"HH\\UserProcess\\Booking\\ABookingStep"},{"kind":32,"name":"load_booking","modifiers":2,"location":[177,4,192,5],"description":"Retrieves the booking object by id","scope":"HH\\UserProcess\\Booking\\ABookingStep"},{"kind":32,"name":"verify_unique_appointment","modifiers":2,"location":[200,4,231,5],"description":"Checks whether the appointment being booked falls within the restriction\non the number of appointments for a single user","scope":"HH\\UserProcess\\Booking\\ABookingStep","children":[{"kind":128,"name":"$booking","location":[200,49,200,57],"description":"the booking id","scope":"verify_unique_appointment","type":"int"}]},{"kind":32,"name":"verify_booking_is_valid","modifiers":4,"location":[240,4,258,5],"description":"Checks whether the booking object is valid","scope":"HH\\UserProcess\\Booking\\ABookingStep","type":"bool","children":[{"kind":128,"name":"$booking","location":[240,45,240,53],"description":"loaded booking object with all the necessary data\n","scope":"verify_booking_is_valid","type":"HH\\UserProcess\\Booking\\Booking"}]}]}]}}