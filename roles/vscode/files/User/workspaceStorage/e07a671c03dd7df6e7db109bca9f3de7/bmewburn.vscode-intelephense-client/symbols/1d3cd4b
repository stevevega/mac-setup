{"uri":"file:///Users/vega/Code/huli/manager-web/src/vendor/hulilabs/php-common/src/library/Huli/Viator/ApiAccessor.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"Huli\\Viator","location":[11,0,11,22]},{"kind":1,"name":"EndpointHelper","modifiers":4096,"location":[13,5,13,48],"associated":[{"kind":1,"name":"Huli\\Viator\\Util\\Endpoint"}]},{"kind":1,"name":"Error","modifiers":4096,"location":[14,5,14,15],"associated":[{"kind":1,"name":"Kima\\Error"}]},{"kind":1,"name":"Huli\\Viator\\ApiAccessor","location":[19,0,314,1],"description":"Allows to send a request to Viator for sending a push message to the respective destinataries","children":[{"kind":1024,"name":"GRANT_TYPE_FIELD_NAME","modifiers":1,"location":[24,10,24,46],"scope":"Huli\\Viator\\ApiAccessor","value":"'grant_type'"},{"kind":1024,"name":"CLIENT_CREDENTIALS_GRANT","modifiers":1,"location":[29,10,29,57],"scope":"Huli\\Viator\\ApiAccessor","value":"'client_credentials'"},{"kind":1024,"name":"REFRESH_TOKEN_GRANT","modifiers":1,"location":[34,10,34,47],"scope":"Huli\\Viator\\ApiAccessor","value":"'refresh_token'"},{"kind":1024,"name":"CLIENT_ID_FIELD_NAME","modifiers":1,"location":[39,10,39,44],"scope":"Huli\\Viator\\ApiAccessor","value":"'client_id'"},{"kind":1024,"name":"CLIENT_SECRET_FIELD_NAME","modifiers":1,"location":[40,10,40,52],"scope":"Huli\\Viator\\ApiAccessor","value":"'client_secret'"},{"kind":1024,"name":"TOKEN_ENDPOINT","modifiers":1,"location":[45,10,45,40],"scope":"Huli\\Viator\\ApiAccessor","value":"'oauth/token'"},{"kind":1024,"name":"STATUS_OK","modifiers":1,"location":[50,10,50,25],"scope":"Huli\\Viator\\ApiAccessor","value":"200"},{"kind":1024,"name":"STATUS_FORBIDDEN","modifiers":1,"location":[51,10,51,32],"scope":"Huli\\Viator\\ApiAccessor","value":"403"},{"kind":1024,"name":"TOKEN_OBTAIN_ERROR","modifiers":1,"location":[56,10,57,103],"scope":"Huli\\Viator\\ApiAccessor","value":"'Unable to obtain an access token from Viator server, after attempting token fetch and refresh'"},{"kind":16,"name":"$curl_handler","modifiers":4,"location":[64,12,64,25],"scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\Curl"},{"kind":16,"name":"$access_token","modifiers":4,"location":[73,12,73,25],"scope":"Huli\\Viator\\ApiAccessor"},{"kind":16,"name":"$instance","modifiers":36,"location":[80,19,80,28],"scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\ApiAccessor"},{"kind":16,"name":"$client_id","modifiers":4,"location":[87,12,87,22],"scope":"Huli\\Viator\\ApiAccessor","type":"string"},{"kind":16,"name":"$client_secret","modifiers":4,"location":[94,12,94,26],"scope":"Huli\\Viator\\ApiAccessor","type":"string"},{"kind":16,"name":"$should_check_ssl_security","modifiers":4,"location":[101,12,101,38],"scope":"Huli\\Viator\\ApiAccessor","type":"bool"},{"kind":32,"name":"__construct","modifiers":1,"location":[109,4,114,5],"scope":"Huli\\Viator\\ApiAccessor","children":[{"kind":128,"name":"$client_id","location":[109,32,109,42],"description":"id of the client application for Viator","scope":"__construct","type":"string"},{"kind":128,"name":"$client_secret","location":[109,44,109,58],"description":"secret of the client application for performing OAuth","scope":"__construct","type":"string"},{"kind":128,"name":"$should_check_ssl_security","location":[109,60,109,86],"description":"configuration setting for wether or not to enable\nSSL certificate verification","scope":"__construct","type":"bool"}]},{"kind":32,"name":"dispatch","modifiers":1,"location":[124,4,136,5],"description":"Performs a call to a Viator's endpoint which allows a push message to be sent","scope":"Huli\\Viator\\ApiAccessor","type":"string","children":[{"kind":128,"name":"$message","location":[124,29,124,43],"description":"payload to post to Viator's endpoint","scope":"dispatch","type":"array"},{"kind":128,"name":"$endpoint","location":[124,45,124,54],"description":"target endpoint\n","scope":"dispatch","type":"string"}]},{"kind":32,"name":"perform_push_api_request","modifiers":4,"location":[147,4,157,5],"description":"Sets the proper headers and security, then makes a request to viator push api","scope":"Huli\\Viator\\ApiAccessor","type":"array","children":[{"kind":128,"name":"$access_token","location":[147,46,147,59],"description":"bearer token, for authorization","scope":"perform_push_api_request","type":"string"},{"kind":128,"name":"$payload","location":[147,61,147,69],"description":"json encoded payload (message content)","scope":"perform_push_api_request","type":"string"},{"kind":128,"name":"$endpoint","location":[147,71,147,80],"description":"where to post the request\n","scope":"perform_push_api_request","type":"string"}]},{"kind":32,"name":"get_curl_handler_with_security_options","modifiers":4,"location":[164,4,169,5],"description":"Sets security options in $this->curl_handler, according to the environment","scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\Curl"},{"kind":32,"name":"disable_ssl_security","modifiers":4,"location":[177,4,182,5],"description":"Disables SSL certificate validation.\nThis method MUST NOT be used in production","scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\Curl"},{"kind":32,"name":"get_access_token","modifiers":4,"location":[190,4,199,5],"description":"Obtains an access token, which is stored in $this->access_token\nusing a singleton-pattern-like behavior","scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\AccessToken"},{"kind":32,"name":"refresh_token","modifiers":4,"location":[206,4,213,5],"description":"Exchanges a refresh token for an access token, which is stored in $this->access_token","scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\AccessToken"},{"kind":32,"name":"fetch_token","modifiers":4,"location":[222,4,232,5],"description":"Obtains an access token using a given payload, and converts it into an AccessToken object","scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\AccessToken","children":[{"kind":128,"name":"$payload","location":[222,33,222,41],"description":"that will be sent to be exchanged for an access token\n","scope":"fetch_token","type":"string"}]},{"kind":32,"name":"retry_refresh","modifiers":4,"location":[245,4,265,5],"description":"Retries a request with a refreshed token.\nIf it fails, $this->access_token will be set to null, so when a new request begins,\na new token will be requested","scope":"Huli\\Viator\\ApiAccessor","type":"string","children":[{"kind":128,"name":"$payload","location":[245,35,245,43],"description":"json encoded payload (message content)","scope":"retry_refresh","type":"string"},{"kind":128,"name":"$endpoint","location":[245,45,245,54],"description":"where to post the request","scope":"retry_refresh","type":"string"},{"kind":128,"name":"$status_code","location":[245,56,245,68],"description":"previous request's response code\n","scope":"retry_refresh","type":"string"}]},{"kind":32,"name":"get_curl_handler","modifiers":4,"location":[272,4,279,5],"description":"Implements a singleton-pattern-like behavior to $this->curl_handler","scope":"Huli\\Viator\\ApiAccessor","type":"Huli\\Viator\\Curl"},{"kind":32,"name":"build_token_request","modifiers":4,"location":[287,4,294,5],"description":"Builds a url-encoded 'form', using client credentials and client_id grant type,\nso it can be posted to OAuth2 Token endpoint and be exchanged for an access token","scope":"Huli\\Viator\\ApiAccessor","type":"string"},{"kind":32,"name":"append_credentials_and_encode","modifiers":4,"location":[303,4,313,5],"description":"Adds grant_type array and builds the client credentials array for encoding them into an URL","scope":"Huli\\Viator\\ApiAccessor","type":"string","children":[{"kind":128,"name":"$grant_type","location":[303,51,303,68],"description":"associative array containing the client grant type and its value\n","scope":"append_credentials_and_encode","type":"array"}]}]}]}}