{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Util/UrlPhoto.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Util","location":[11,0,11,18]},{"kind":1,"name":"AwsThumbnail","modifiers":4096,"location":[13,5,13,42],"associated":[{"kind":1,"name":"HH\\Util\\Aws\\Thumbnail"}]},{"kind":1,"name":"PublicAwsThumbnail","modifiers":4096,"location":[14,5,14,61],"associated":[{"kind":1,"name":"Huli\\AWS\\Thumbnail\\PublicThumbnail"}]},{"kind":1,"name":"AwsThumbnailSize","modifiers":4096,"location":[15,5,15,48],"associated":[{"kind":1,"name":"Huli\\AWS\\Thumbnail\\Size"}]},{"kind":1,"name":"Redirector","modifiers":4096,"location":[16,5,16,25],"associated":[{"kind":1,"name":"Kima\\Http\\Redirector"}]},{"kind":1,"name":"App","modifiers":4096,"location":[17,5,17,19],"associated":[{"kind":1,"name":"Kima\\Prime\\App"}]},{"kind":1,"name":"ProfileOldUrlModel","modifiers":4096,"location":[18,5,18,46],"associated":[{"kind":1,"name":"Model\\ProfileOldUrl"}]},{"kind":1,"name":"HH\\Util\\UrlPhoto","modifiers":8,"location":[23,0,260,1],"description":"Utility library to redirect request from the old dr image structure to the new s3 structure","children":[{"kind":1024,"name":"THUMBNAIL","modifiers":1,"location":[28,10,28,33],"scope":"HH\\Util\\UrlPhoto","value":"'thumbnail'"},{"kind":1024,"name":"PHOTOS","modifiers":1,"location":[29,10,29,27],"scope":"HH\\Util\\UrlPhoto","value":"'photos'"},{"kind":1024,"name":"DOCTOR","modifiers":1,"location":[34,10,34,27],"scope":"HH\\Util\\UrlPhoto","value":"'doctor'"},{"kind":1024,"name":"CLINIC","modifiers":1,"location":[35,10,35,27],"scope":"HH\\Util\\UrlPhoto","value":"'clinic'"},{"kind":1024,"name":"SERVICE","modifiers":1,"location":[36,10,36,29],"scope":"HH\\Util\\UrlPhoto","value":"'service'"},{"kind":1024,"name":"SERVICE_BRANCH","modifiers":1,"location":[37,10,37,43],"scope":"HH\\Util\\UrlPhoto","value":"'service_branch'"},{"kind":1024,"name":"DOCTOR_IMAGE","modifiers":1,"location":[38,10,38,39],"scope":"HH\\Util\\UrlPhoto","value":"'doctor_image'"},{"kind":1024,"name":"CLINIC_IMAGE","modifiers":1,"location":[39,10,39,39],"scope":"HH\\Util\\UrlPhoto","value":"'clinic_image'"},{"kind":1024,"name":"ENTITIES","modifiers":1,"location":[44,10,81,5],"scope":"HH\\Util\\UrlPhoto","value":"[\n        self::DOCTOR => [\n            1,\n            AwsThumbnail::DOCTOR_PHOTO_THUMB_SIZE,\n            AwsThumbnailSize::W120_H150,\n            'Model\\Doctor'\n        ],\n        self::CLINIC  => [\n            2,\n            AwsThumbnail::CLINIC_PHOTO_THUMB_SIZE,\n            AwsThumbnailSize::W500_H250,\n            'Model\\Clinic'\n        ],\n        self::SERVICE => [\n            3,\n            AwsThumbnail::SERVICE_PHOTO_THUMB_SIZE,\n            AwsThumbnailSize::W150_H150,\n            'Model\\Service'\n        ],\n        self::SERVICE_BRANCH => [\n            4,\n            AwsThumbnail::BRANCH_PHOTO_THUMB_SIZE,\n            AwsThumbnailSize::W500_H250,\n            'Model\\Service\\Branch'\n        ],\n        self::DOCTOR_IMAGE => [\n            5,\n            AwsThumbnail::DOCTOR_IMAGE_THUMB_SIZE,\n            AwsThumbnailSize::W115_H115,\n            'Model\\Doctor\\Image'\n        ],\n        self::CLINIC_IMAGE => [\n            6,\n            AwsThumbnail::CLINIC_IMAGE_THUMB_SIZE,\n            AwsThumbnailSize::W115_H115,\n            'Model\\Clinic\\Image'\n        ]\n    ]"},{"kind":32,"name":"redirect","modifiers":1,"location":[88,4,99,5],"description":"Redirect the dr request to the new s3 structure","scope":"HH\\Util\\UrlPhoto","children":[{"kind":128,"name":"$params","location":[88,29,88,42],"scope":"redirect","type":"array"}]},{"kind":32,"name":"redirect_thumbnail","modifiers":4,"location":[106,4,158,5],"description":"Redirect thumbnails to the s3 location","scope":"HH\\Util\\UrlPhoto","children":[{"kind":128,"name":"$params","location":[106,40,106,53],"scope":"redirect_thumbnail","type":"array"}]},{"kind":32,"name":"redirect_photos","modifiers":4,"location":[165,4,202,5],"description":"Redirect photos to the s3 location","scope":"HH\\Util\\UrlPhoto","children":[{"kind":128,"name":"$params","location":[165,37,165,50],"scope":"redirect_photos","type":"array"}]},{"kind":32,"name":"redirect_thumbnail_to_public_s3_path","modifiers":4,"location":[211,4,224,5],"description":"Redirect a thumbnail path to the new s3 thumbnail location","scope":"HH\\Util\\UrlPhoto","children":[{"kind":128,"name":"$id_object","location":[211,58,211,68],"scope":"redirect_thumbnail_to_public_s3_path","type":"int"},{"kind":128,"name":"$thumb_size","location":[211,70,211,81],"scope":"redirect_thumbnail_to_public_s3_path","type":"string"},{"kind":128,"name":"$entity","location":[211,83,211,90],"scope":"redirect_thumbnail_to_public_s3_path","type":"string"}]},{"kind":32,"name":"redirect_to_public_s3_path","modifiers":4,"location":[232,4,241,5],"description":"Redirect the profile photo to the new s3 location","scope":"HH\\Util\\UrlPhoto","children":[{"kind":128,"name":"$id_object","location":[232,48,232,58],"scope":"redirect_to_public_s3_path","type":"int"},{"kind":128,"name":"$entity","location":[232,60,232,67],"scope":"redirect_to_public_s3_path","type":"string"}]},{"kind":32,"name":"redirect_301","modifiers":4,"location":[248,4,251,5],"description":"Make a 301 redirect to the new image location","scope":"HH\\Util\\UrlPhoto","children":[{"kind":128,"name":"$new_path","location":[248,34,248,43],"description":"s3 location","scope":"redirect_301","type":"string"}]},{"kind":32,"name":"redirect_404","modifiers":4,"location":[256,4,259,5],"description":"Redirect the user to 404 page","scope":"HH\\Util\\UrlPhoto"}]}]}}