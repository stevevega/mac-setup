{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Mail/Handler/Message/MessageMailer.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Mail\\Handler\\Message","location":[11,0,11,34]},{"kind":1,"name":"HHDoctor","modifiers":4096,"location":[13,5,13,26],"associated":[{"kind":1,"name":"HH\\Doctor"}]},{"kind":1,"name":"MailHandler","modifiers":4096,"location":[14,5,14,24],"associated":[{"kind":1,"name":"HH\\Mail\\MailHandler"}]},{"kind":1,"name":"Settings","modifiers":4096,"location":[15,5,15,26],"associated":[{"kind":1,"name":"HH\\Mail\\User\\Settings"}]},{"kind":1,"name":"Template","modifiers":4096,"location":[16,5,16,26],"associated":[{"kind":1,"name":"HH\\Mail\\Util\\Template"}]},{"kind":1,"name":"Role","modifiers":4096,"location":[17,5,17,17],"associated":[{"kind":1,"name":"HH\\User\\Role"}]},{"kind":1,"name":"Error","modifiers":4096,"location":[18,5,18,15],"associated":[{"kind":1,"name":"Kima\\Error"}]},{"kind":1,"name":"L10n","modifiers":4096,"location":[19,5,19,14],"associated":[{"kind":1,"name":"Kima\\L10n"}]},{"kind":1,"name":"Composer","modifiers":4096,"location":[20,5,20,18],"associated":[{"kind":1,"name":"Mail\\Composer"}]},{"kind":1,"name":"MessageModel","modifiers":4096,"location":[21,5,21,47],"associated":[{"kind":1,"name":"Model\\Conversation\\Message"}]},{"kind":1,"name":"ParticipantModel","modifiers":4096,"location":[22,5,22,55],"associated":[{"kind":1,"name":"Model\\Conversation\\Participant"}]},{"kind":1,"name":"DoctorModel","modifiers":4096,"location":[23,5,23,32],"associated":[{"kind":1,"name":"Model\\Doctor"}]},{"kind":1,"name":"UserModel","modifiers":4096,"location":[24,5,24,28],"associated":[{"kind":1,"name":"Model\\User"}]},{"kind":1,"name":"Reply","modifiers":4096,"location":[25,5,25,60],"associated":[{"kind":1,"name":"Webhooks\\Mandrill\\Inbound\\Conversation\\Process"}]},{"kind":1,"name":"HH\\Mail\\Handler\\Message\\MessageMailer","location":[27,0,411,1],"associated":[{"kind":1,"name":"HH\\Mail\\MailHandler"}],"description":"_\n_             _ _| |_\n| |           | |_   _|\n| |___  _   _ | | |_|\n| '_  \\| | | || | | |\n| | | || |_| || | | |\n|_| |_|\\___,_||_| |_|\n\n(c) Huli Inc","children":[{"kind":1024,"name":"SENDER_ID_USER","modifiers":1,"location":[32,10,32,43],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'sender_id_user'"},{"kind":1024,"name":"ID_CONVERSTATION","modifiers":1,"location":[33,10,33,46],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'id_conversation'"},{"kind":1024,"name":"REPLY_AS","modifiers":1,"location":[34,10,34,31],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'reply_as'"},{"kind":1024,"name":"ID_DOCTOR","modifiers":1,"location":[35,10,35,33],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'id_doctor'"},{"kind":1024,"name":"ID_MESSAGE","modifiers":1,"location":[36,10,36,35],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'id_message'"},{"kind":1024,"name":"R_SENDER_ID_USER","modifiers":1,"location":[41,10,41,34],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'sid'"},{"kind":1024,"name":"R_ID_CONVERSATION","modifiers":1,"location":[42,10,42,35],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'cid'"},{"kind":1024,"name":"R_REPLY_AS","modifiers":1,"location":[43,10,43,27],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'ra'"},{"kind":1024,"name":"R_ID_DOCTOR","modifiers":1,"location":[44,10,44,29],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'did'"},{"kind":1024,"name":"R_ID_MESSAGE","modifiers":1,"location":[45,10,45,30],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'mid'"},{"kind":1024,"name":"HOME_MESSAGE_LINK","modifiers":1,"location":[50,10,50,44],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'/messages/%d'"},{"kind":1024,"name":"DASHBOARD_MESSAGE_LINK","modifiers":1,"location":[51,10,51,66],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'/#messages/%d/conversation/%d'"},{"kind":1024,"name":"DASHBOARD_MESSAGE_ASSISTANT_LINK","modifiers":1,"location":[52,10,52,76],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","value":"'/#messages/%d/conversation/%d'"},{"kind":16,"name":"$tags_hulihealth","modifiers":2,"location":[59,14,59,62],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","type":"array"},{"kind":16,"name":"$tags_hulipractice","modifiers":2,"location":[66,14,66,66],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","type":"array"},{"kind":16,"name":"$tags","modifiers":2,"location":[68,14,68,67],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","type":"array"},{"kind":16,"name":"$mail_fields","modifiers":36,"location":[75,19,81,5],"scope":"HH\\Mail\\Handler\\Message\\MessageMailer","type":"array"},{"kind":32,"name":"send","modifiers":1,"location":[86,4,109,5],"description":"Sends the email notifications","scope":"HH\\Mail\\Handler\\Message\\MessageMailer"},{"kind":32,"name":"notify_assistant_replied","modifiers":4,"location":[118,4,142,5],"description":"Send a message to the doctor, patient and huli","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","children":[{"kind":128,"name":"$sender","location":[118,46,118,53],"description":"secretart\n","scope":"notify_assistant_replied","type":"object"}]},{"kind":32,"name":"notify_doctor_replied","modifiers":4,"location":[149,4,165,5],"description":"Sends the email to patient and doctor that a user replied","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","children":[{"kind":128,"name":"$sender","location":[149,43,149,50],"scope":"notify_doctor_replied","type":"mixed"}]},{"kind":32,"name":"notify_patient_replied","modifiers":4,"location":[173,4,201,5],"description":"Sends an email to the doctor, assistant and admin that the patient sent\nan email","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","children":[{"kind":128,"name":"$sender","location":[173,44,173,51],"scope":"notify_patient_replied","type":"mixed"}]},{"kind":32,"name":"notify_patient","modifiers":4,"location":[209,4,231,5],"description":"Notifies the patient about a new message","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","children":[{"kind":128,"name":"$patient","location":[209,36,209,44],"scope":"notify_patient","type":"User"},{"kind":128,"name":"$doctor","location":[209,46,209,53],"scope":"notify_patient","type":"User"}]},{"kind":32,"name":"notify_admin","modifiers":4,"location":[241,4,266,5],"description":"Sends a notification to the admin about the message sent","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","children":[{"kind":128,"name":"$sender","location":[241,34,241,41],"scope":"notify_admin","type":"User"},{"kind":128,"name":"$recipient","location":[241,43,241,53],"scope":"notify_admin","type":"User"},{"kind":128,"name":"$doctor","location":[241,55,241,62],"scope":"notify_admin","type":"User"},{"kind":128,"name":"$patient","location":[241,64,241,72],"scope":"notify_admin","type":"User"}]},{"kind":32,"name":"notify_assistant","modifiers":4,"location":[276,4,309,5],"description":"Sends an email to the assistant about the new message to the doctor","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","children":[{"kind":128,"name":"$sender","location":[276,38,276,45],"scope":"notify_assistant","type":"User"},{"kind":128,"name":"$recipient","location":[276,47,276,57],"scope":"notify_assistant","type":"User"},{"kind":128,"name":"$assistant","location":[276,59,276,69],"scope":"notify_assistant","type":"User"},{"kind":128,"name":"$doctor","location":[276,71,276,78],"scope":"notify_assistant","type":"User"}]},{"kind":32,"name":"notify_doctor","modifiers":4,"location":[319,4,359,5],"description":"Sends an email to the doctor about the new message received","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","children":[{"kind":128,"name":"$doctor","location":[319,35,319,42],"scope":"notify_doctor","type":"User"},{"kind":128,"name":"$sender","location":[319,44,319,51],"description":"patient or assistant","scope":"notify_doctor","type":"User"},{"kind":128,"name":"$patient","location":[319,53,319,68],"description":"optionally pass the patient information in case it\nis different from the sender","scope":"notify_doctor","value":"null","type":"User"}]},{"kind":32,"name":"get_patient_message_link","modifiers":4,"location":[370,4,374,5],"description":"Returns the link to the patient message dashboard","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","type":"string"},{"kind":32,"name":"get_dashboard_message_link","modifiers":4,"location":[384,4,392,5],"description":"Returns the link to the doctor/assistant message dashborad","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","type":"string","children":[{"kind":128,"name":"$id_user","location":[384,48,384,56],"scope":"get_dashboard_message_link","type":"mixed"}]},{"kind":32,"name":"is_enabled","modifiers":4,"location":[401,4,410,5],"description":"Returns whether the emails should be sent for the given user.","scope":"HH\\Mail\\Handler\\Message\\MessageMailer","typeSource":1,"type":"bool","children":[{"kind":128,"name":"$id_user","location":[401,32,401,44],"scope":"is_enabled","typeSource":1,"type":"int"}]}]}]}}