{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Conversation/AConversation.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Conversation","location":[11,0,11,26]},{"kind":1,"name":"AObjectRequest","modifiers":4096,"location":[13,5,13,27],"associated":[{"kind":1,"name":"HH\\Http\\AObjectRequest"}]},{"kind":1,"name":"EventHandlingOperations","modifiers":4096,"location":[14,5,14,76],"associated":[{"kind":1,"name":"HH\\ServiceProviders\\EventHandling\\Operations"}]},{"kind":1,"name":"EventHandlingOrchestrator","modifiers":4096,"location":[15,5,15,80],"associated":[{"kind":1,"name":"HH\\ServiceProviders\\EventHandling\\Orchestrator"}]},{"kind":1,"name":"Date","modifiers":4096,"location":[16,5,16,17],"associated":[{"kind":1,"name":"HH\\Util\\Date"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[17,5,17,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"FixedUserContext","modifiers":4096,"location":[18,5,18,61],"associated":[{"kind":1,"name":"Huli\\Authorization\\Context\\FixedUser"}]},{"kind":1,"name":"PracticeAuthorization","modifiers":4096,"location":[19,5,19,65],"associated":[{"kind":1,"name":"Huli\\Authorization\\Factory\\Practice"}]},{"kind":1,"name":"Feature","modifiers":4096,"location":[20,5,20,31],"associated":[{"kind":1,"name":"Huli\\Authorization\\Feature"}]},{"kind":1,"name":"PublicAwsThumbnail","modifiers":4096,"location":[21,5,21,61],"associated":[{"kind":1,"name":"Huli\\AWS\\Thumbnail\\PublicThumbnail"}]},{"kind":1,"name":"AwsThumbnailSize","modifiers":4096,"location":[22,5,22,48],"associated":[{"kind":1,"name":"Huli\\AWS\\Thumbnail\\Size"}]},{"kind":1,"name":"Gender","modifiers":4096,"location":[23,5,23,30],"associated":[{"kind":1,"name":"Huli\\Enum\\Listable\\Gender"}]},{"kind":1,"name":"Request","modifiers":4096,"location":[24,5,24,22],"associated":[{"kind":1,"name":"Kima\\Http\\Request"}]},{"kind":1,"name":"AuthorizationModel","modifiers":4096,"location":[25,5,25,46],"associated":[{"kind":1,"name":"Model\\Authorization"}]},{"kind":1,"name":"Conversation","modifiers":4096,"location":[26,5,26,23],"associated":[{"kind":1,"name":"Model\\Conversation"}]},{"kind":1,"name":"Message","modifiers":4096,"location":[27,5,27,31],"associated":[{"kind":1,"name":"Model\\Conversation\\Message"}]},{"kind":1,"name":"Participant","modifiers":4096,"location":[28,5,28,35],"associated":[{"kind":1,"name":"Model\\Conversation\\Participant"}]},{"kind":1,"name":"DoctorModel","modifiers":4096,"location":[29,5,29,32],"associated":[{"kind":1,"name":"Model\\Doctor"}]},{"kind":1,"name":"PatientFile","modifiers":4096,"location":[30,5,30,38],"associated":[{"kind":1,"name":"Model\\Patient\\File"}]},{"kind":1,"name":"HH\\Conversation\\AConversation","modifiers":16,"location":[35,0,559,1],"associated":[{"kind":1,"name":"HH\\Http\\AObjectRequest"}],"description":"Conversation abstract class","children":[{"kind":1024,"name":"ERROR_NO_SESSION","modifiers":1,"location":[40,10,40,65],"scope":"HH\\Conversation\\AConversation","value":"'The object session is not defined.'"},{"kind":1024,"name":"CONTENT","modifiers":1,"location":[45,10,45,29],"scope":"HH\\Conversation\\AConversation","value":"'content'"},{"kind":1024,"name":"ID_CONVERSATION","modifiers":1,"location":[46,10,46,45],"scope":"HH\\Conversation\\AConversation","value":"'id_conversation'"},{"kind":1024,"name":"ID_DOCTOR","modifiers":1,"location":[47,10,47,33],"scope":"HH\\Conversation\\AConversation","value":"'id_doctor'"},{"kind":1024,"name":"ID_RECIPIENT","modifiers":1,"location":[48,10,48,39],"scope":"HH\\Conversation\\AConversation","value":"'id_recipient'"},{"kind":1024,"name":"REPLY_AS","modifiers":1,"location":[49,10,49,31],"scope":"HH\\Conversation\\AConversation","value":"'reply_as'"},{"kind":1024,"name":"SUBJECT","modifiers":1,"location":[50,10,50,29],"scope":"HH\\Conversation\\AConversation","value":"'subject'"},{"kind":1024,"name":"ALIAS_CONTENT","modifiers":1,"location":[55,10,55,29],"scope":"HH\\Conversation\\AConversation","value":"'m'"},{"kind":1024,"name":"ALIAS_ID_CONVERSATION","modifiers":1,"location":[56,10,56,39],"scope":"HH\\Conversation\\AConversation","value":"'cid'"},{"kind":1024,"name":"ALIAS_ID_DOCTOR","modifiers":1,"location":[57,10,57,33],"scope":"HH\\Conversation\\AConversation","value":"'did'"},{"kind":1024,"name":"ALIAS_ID_RECIPIENT","modifiers":1,"location":[58,10,58,36],"scope":"HH\\Conversation\\AConversation","value":"'rid'"},{"kind":1024,"name":"ALIAS_REPLY_AS","modifiers":1,"location":[59,10,59,31],"scope":"HH\\Conversation\\AConversation","value":"'ra'"},{"kind":1024,"name":"ALIAS_SUBJECT","modifiers":1,"location":[60,10,60,29],"scope":"HH\\Conversation\\AConversation","value":"'s'"},{"kind":1024,"name":"DEFAULT_PHOTO_FEMALE","modifiers":1,"location":[65,10,65,82],"scope":"HH\\Conversation\\AConversation","value":"'/img/placeholder/thumbnail/45x45/girl-green.png'"},{"kind":1024,"name":"DEFAULT_PHOTO_MALE","modifiers":1,"location":[66,10,66,78],"scope":"HH\\Conversation\\AConversation","value":"'/img/placeholder/thumbnail/45x45/man-blue.png'"},{"kind":16,"name":"$save_conversation_fields","modifiers":2,"location":[73,14,77,5],"scope":"HH\\Conversation\\AConversation","type":"array"},{"kind":16,"name":"$save_message_fields","modifiers":2,"location":[84,14,86,5],"scope":"HH\\Conversation\\AConversation","type":"array"},{"kind":16,"name":"$id_conversation","modifiers":2,"location":[91,14,91,30],"scope":"HH\\Conversation\\AConversation"},{"kind":16,"name":"$subject","modifiers":2,"location":[92,14,92,22],"scope":"HH\\Conversation\\AConversation"},{"kind":16,"name":"$content","modifiers":2,"location":[93,14,93,22],"scope":"HH\\Conversation\\AConversation"},{"kind":16,"name":"$id_doctor","modifiers":2,"location":[94,14,94,24],"scope":"HH\\Conversation\\AConversation"},{"kind":16,"name":"$id_recipient","modifiers":2,"location":[95,14,95,27],"scope":"HH\\Conversation\\AConversation"},{"kind":16,"name":"$reply_as","modifiers":2,"location":[96,14,96,23],"scope":"HH\\Conversation\\AConversation"},{"kind":16,"name":"$id_user","modifiers":2,"location":[101,14,101,22],"scope":"HH\\Conversation\\AConversation"},{"kind":16,"name":"$id_conversation_participant","modifiers":2,"location":[109,14,109,42],"scope":"HH\\Conversation\\AConversation","type":"int"},{"kind":16,"name":"$session","modifiers":2,"location":[116,14,116,22],"scope":"HH\\Conversation\\AConversation","type":"Huli\\Authentication\\ISession"},{"kind":32,"name":"__construct","modifiers":1,"location":[123,4,126,5],"description":"Sets the value of session","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$session","location":[123,32,123,56],"scope":"__construct","value":"null","typeSource":1,"type":"Huli\\Authentication\\ISession"}]},{"kind":32,"name":"get_conversations","modifiers":1,"location":[135,4,153,5],"description":"Gets a list of conversations","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$criteria","location":[135,38,135,52],"scope":"get_conversations","value":"''","type":"string"},{"kind":128,"name":"$id","location":[135,54,135,64],"description":"Custom id","scope":"get_conversations","value":"null","type":"int"},{"kind":128,"name":"$allow_all_conversations","location":[135,66,135,97],"scope":"get_conversations","value":"true","type":"bool"}]},{"kind":32,"name":"get_conversation","modifiers":1,"location":[160,4,192,5],"description":"Gets a specific conversation given the conversation id","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$id_conversation","location":[160,37,160,53],"scope":"get_conversation","type":"int"}]},{"kind":32,"name":"save_conversation","modifiers":1,"location":[201,4,256,5],"description":"Saves a conversation and adds the message and participants","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$conversation","location":[201,38,201,58],"scope":"save_conversation","value":"null","type":"mixed"}]},{"kind":32,"name":"save_message","modifiers":1,"location":[263,4,273,5],"description":"Saves a message to the conversation","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$id_conversation","location":[263,33,263,49],"scope":"save_message","type":"int"}]},{"kind":32,"name":"save_message_email","modifiers":1,"location":[280,4,289,5],"description":"Saves a message to the conversation","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$id_conversation","location":[280,39,280,55],"scope":"save_message_email","type":"int"},{"kind":128,"name":"$id_user","location":[280,57,280,65],"scope":"save_message_email"},{"kind":128,"name":"$content","location":[280,67,280,75],"scope":"save_message_email"}]},{"kind":32,"name":"add_conversation_participants","modifiers":1,"location":[299,4,320,5],"description":"Adds participants to a particular conversation if not added already","scope":"HH\\Conversation\\AConversation","type":"array","children":[{"kind":128,"name":"$id_conversation","location":[299,50,299,66],"scope":"add_conversation_participants","type":"int"},{"kind":128,"name":"$participants","location":[299,68,299,87],"scope":"add_conversation_participants"}]},{"kind":32,"name":"get_conversation_participants","modifiers":18,"location":[325,4,325,64],"description":"Retrieves a conversation participants","scope":"HH\\Conversation\\AConversation"},{"kind":32,"name":"save_message_content","modifiers":2,"location":[330,4,364,5],"description":"Saves a message to the conversation","scope":"HH\\Conversation\\AConversation"},{"kind":32,"name":"is_valid_conversation_user","modifiers":2,"location":[372,4,375,5],"description":"Sets the conversation id","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$id_conversation","location":[372,50,372,66],"scope":"is_valid_conversation_user","type":"int"},{"kind":128,"name":"$id_user","location":[372,68,372,76],"scope":"is_valid_conversation_user","type":"int"}]},{"kind":32,"name":"update_last_access","modifiers":2,"location":[385,4,388,5],"description":"Updates the last user access to the conversation","scope":"HH\\Conversation\\AConversation","type":"bool","children":[{"kind":128,"name":"$id_conversation","location":[385,42,385,58],"scope":"update_last_access","type":"int"},{"kind":128,"name":"$id_user","location":[385,60,385,68],"scope":"update_last_access","type":"int"}]},{"kind":32,"name":"get_doctor_assistants","modifiers":2,"location":[393,4,414,5],"description":"Adds the doctor assistants to the input array","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$id_owner","location":[393,45,393,54],"scope":"get_doctor_assistants"}]},{"kind":32,"name":"set_id_conversation","modifiers":2,"location":[421,4,430,5],"description":"Sets the conversation id and validates it","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$id_conversation","location":[421,43,421,59],"scope":"set_id_conversation","type":"int"}]},{"kind":32,"name":"set_id_recipient","modifiers":2,"location":[437,4,447,5],"description":"Sets the conversation recipent id and validates it","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$id_recipient","location":[437,40,437,53],"scope":"set_id_recipient","type":"int"}]},{"kind":32,"name":"get_conversation_id_user","modifiers":2,"location":[455,4,458,5],"description":"Returns an id_user that will be used for getting a conversation\nto, for example, relate the result with the current user to gain access to more data","scope":"HH\\Conversation\\AConversation","type":"string"},{"kind":32,"name":"get_session","modifiers":2,"location":[465,4,473,5],"description":"Retrieves (if exists) the value of session","scope":"HH\\Conversation\\AConversation","type":"Huli\\Authentication\\ISession"},{"kind":32,"name":"get_id_conversation_participant","modifiers":4,"location":[482,4,494,5],"description":"Gets the conversation participant, creates a new one if not exists","scope":"HH\\Conversation\\AConversation","type":"int","children":[{"kind":128,"name":"$id_user","location":[482,53,482,61],"description":"The message sender id user\n","scope":"get_id_conversation_participant","type":"int"}]},{"kind":32,"name":"get_sender_id_user","modifiers":4,"location":[502,4,505,5],"description":"Gets the message sender id user\nChildren classes might overwrite this method as required","scope":"HH\\Conversation\\AConversation","type":"int"},{"kind":32,"name":"save_conversation_message","modifiers":4,"location":[512,4,539,5],"description":"Saves a conversation message","scope":"HH\\Conversation\\AConversation","type":"array"},{"kind":32,"name":"generate_thumbnails","modifiers":4,"location":[546,4,558,5],"description":"Adds the user photo thumbnails for the messages","scope":"HH\\Conversation\\AConversation","children":[{"kind":128,"name":"$participants","location":[546,41,546,61],"scope":"generate_thumbnails","type":"array"}]}]}]}}