{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Request/Behavior/AHandler.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Request\\Behavior","location":[11,0,11,30]},{"kind":1,"name":"TResponse","modifiers":4096,"location":[13,5,13,22],"associated":[{"kind":1,"name":"HH\\Http\\TResponse"}]},{"kind":1,"name":"Option","modifiers":4096,"location":[14,5,14,28],"associated":[{"kind":1,"name":"HH\\Request\\Field\\Option"}]},{"kind":1,"name":"FieldType","modifiers":4096,"location":[15,5,15,39],"associated":[{"kind":1,"name":"HH\\Request\\Field\\Type"}]},{"kind":1,"name":"IType","modifiers":4096,"location":[16,5,16,26],"associated":[{"kind":1,"name":"HH\\Request\\Type\\IType"}]},{"kind":1,"name":"Status","modifiers":4096,"location":[17,5,17,14],"associated":[{"kind":1,"name":"HH\\Status"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[18,5,18,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"IAccess","modifiers":4096,"location":[19,5,19,31],"associated":[{"kind":1,"name":"Huli\\Authorization\\IAccess"}]},{"kind":1,"name":"Transaction","modifiers":4096,"location":[20,5,20,30],"associated":[{"kind":1,"name":"Huli\\Database\\Transaction"}]},{"kind":1,"name":"TaskQueue","modifiers":4096,"location":[21,5,21,40],"associated":[{"kind":1,"name":"Huli\\Http\\Request\\Handler\\TaskQueue"}]},{"kind":1,"name":"Error","modifiers":4096,"location":[22,5,22,15],"associated":[{"kind":1,"name":"Kima\\Error"}]},{"kind":1,"name":"Request","modifiers":4096,"location":[23,5,23,22],"associated":[{"kind":1,"name":"Kima\\Http\\Request"}]},{"kind":1,"name":"stdClass","modifiers":4096,"location":[24,5,24,13],"associated":[{"kind":1,"name":"stdClass"}]},{"kind":1,"name":"HH\\Request\\Behavior\\AHandler","modifiers":16,"location":[30,0,769,1],"associated":[{"kind":4,"name":"HH\\Http\\TResponse"}],"description":"Abstract HTTP Request class\nHandles incomming request data","children":[{"kind":1024,"name":"ERROR_INVALID_FIELD","modifiers":1,"location":[40,10,40,56],"scope":"HH\\Request\\Behavior\\AHandler","value":"'error_invalid_field_%s'"},{"kind":1024,"name":"ERROR_INVALID_HANDLER_TYPE","modifiers":1,"location":[41,10,41,70],"scope":"HH\\Request\\Behavior\\AHandler","value":"'error_invalid_handler_type_%s'"},{"kind":1024,"name":"ERROR_INVALID_REQUEST","modifiers":1,"location":[42,10,42,58],"scope":"HH\\Request\\Behavior\\AHandler","value":"'The request is invalid'"},{"kind":1024,"name":"ERROR_INVALID_STATUS","modifiers":1,"location":[43,10,43,62],"scope":"HH\\Request\\Behavior\\AHandler","value":"'The status value is invalid'"},{"kind":1024,"name":"ERROR_NO_FIELD","modifiers":1,"location":[44,10,44,74],"scope":"HH\\Request\\Behavior\\AHandler","value":"'The field %s must be declared in the class %s'"},{"kind":1024,"name":"ERROR_NO_HANDLER","modifiers":1,"location":[45,10,45,90],"scope":"HH\\Request\\Behavior\\AHandler","value":"'The child handler \"%s\" class called by \"%s\" does not exists'"},{"kind":1024,"name":"ERROR_NO_INJECTED_FIELD","modifiers":1,"location":[46,10,46,92],"scope":"HH\\Request\\Behavior\\AHandler","value":"'The injected field %s must be declared in the class %s'"},{"kind":1024,"name":"ERROR_NO_SESSION","modifiers":1,"location":[47,10,47,65],"scope":"HH\\Request\\Behavior\\AHandler","value":"'The object session is not defined.'"},{"kind":1024,"name":"ERROR_REQUIRED_FIELD","modifiers":1,"location":[48,10,48,61],"scope":"HH\\Request\\Behavior\\AHandler","value":"'error_required_field_%s.%s'"},{"kind":1024,"name":"REQUEST_HTTP","modifiers":1,"location":[53,10,53,26],"scope":"HH\\Request\\Behavior\\AHandler","value":"0"},{"kind":1024,"name":"REQUEST_OBJECT","modifiers":1,"location":[54,10,54,28],"scope":"HH\\Request\\Behavior\\AHandler","value":"1"},{"kind":1024,"name":"HANDLER_SINGLE","modifiers":1,"location":[59,10,59,28],"scope":"HH\\Request\\Behavior\\AHandler","value":"0"},{"kind":1024,"name":"HANDLER_LIST_INDIVIDUAL","modifiers":1,"location":[60,10,60,37],"scope":"HH\\Request\\Behavior\\AHandler","value":"1"},{"kind":1024,"name":"HANDLER_LIST_BATCH","modifiers":1,"location":[61,10,61,32],"scope":"HH\\Request\\Behavior\\AHandler","value":"2"},{"kind":1024,"name":"CHILD_REQUEST_TYPE","modifiers":1,"location":[66,10,66,32],"scope":"HH\\Request\\Behavior\\AHandler","value":"0"},{"kind":1024,"name":"CHILD_REQUIRED","modifiers":1,"location":[67,10,67,28],"scope":"HH\\Request\\Behavior\\AHandler","value":"1"},{"kind":1024,"name":"CHILD_HANDLER","modifiers":1,"location":[68,10,68,27],"scope":"HH\\Request\\Behavior\\AHandler","value":"2"},{"kind":1024,"name":"CHILD_INJECTED_FIELDS","modifiers":1,"location":[69,10,69,35],"scope":"HH\\Request\\Behavior\\AHandler","value":"3"},{"kind":1024,"name":"CHILD_SEND_REQUEST_DATA","modifiers":1,"location":[70,10,70,37],"scope":"HH\\Request\\Behavior\\AHandler","value":"4"},{"kind":1024,"name":"CHILD_PROCESS_NULLS","modifiers":1,"location":[71,10,71,33],"scope":"HH\\Request\\Behavior\\AHandler","value":"5"},{"kind":16,"name":"$request_type","modifiers":2,"location":[78,14,78,27],"scope":"HH\\Request\\Behavior\\AHandler","type":"string"},{"kind":16,"name":"$transaction","modifiers":2,"location":[85,14,85,26],"scope":"HH\\Request\\Behavior\\AHandler","type":"Huli\\Database\\Transaction"},{"kind":16,"name":"$task_queue","modifiers":2,"location":[93,14,93,25],"scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\Trigger"},{"kind":16,"name":"$objects","modifiers":2,"location":[100,14,100,22],"scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":16,"name":"$access","modifiers":2,"location":[107,14,107,21],"scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\Access"},{"kind":16,"name":"$main_reference","modifiers":2,"location":[114,14,114,29],"scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\obj"},{"kind":16,"name":"$request_data","modifiers":2,"location":[121,14,121,27],"scope":"HH\\Request\\Behavior\\AHandler","type":"stdClass"},{"kind":16,"name":"$processed_data","modifiers":2,"location":[128,14,128,29],"scope":"HH\\Request\\Behavior\\AHandler","type":"stdClass"},{"kind":16,"name":"$processed_fields","modifiers":2,"location":[135,14,135,36],"scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":16,"name":"$injected_fields","modifiers":2,"location":[142,14,142,35],"scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":16,"name":"$processed_list","modifiers":2,"location":[150,14,150,34],"scope":"HH\\Request\\Behavior\\AHandler","type":"stdClass"},{"kind":16,"name":"$children_options","modifiers":2,"location":[158,14,165,5],"scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":16,"name":"$session","modifiers":4,"location":[172,12,172,20],"scope":"HH\\Request\\Behavior\\AHandler","type":"Huli\\Authentication\\ISession"},{"kind":16,"name":"$handler_types","modifiers":4,"location":[179,12,183,5],"scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":32,"name":"__construct","modifiers":1,"location":[192,4,197,5],"description":"Aggregates the request to the handler object","scope":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$request_type","location":[192,32,192,51],"scope":"__construct","typeSource":1,"type":"HH\\Request\\Type\\IType"},{"kind":128,"name":"$transaction","location":[192,53,192,77],"scope":"__construct","typeSource":1,"type":"Huli\\Database\\Transaction"},{"kind":128,"name":"$task_queue","location":[192,79,192,100],"scope":"__construct","typeSource":1,"type":"Huli\\Http\\Request\\Handler\\TaskQueue"}]},{"kind":32,"name":"get_request_fields","modifiers":17,"location":[204,4,204,50],"description":"Gets the fields required for the request","scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":32,"name":"get_children_requests","modifiers":17,"location":[211,4,211,53],"description":"Gets the children requests to process","scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":32,"name":"process","modifiers":1,"location":[221,4,238,5],"description":"Process the get type request and returns a TResponse formatted result","scope":"HH\\Request\\Behavior\\AHandler","type":"array","children":[{"kind":128,"name":"$request_data","location":[221,28,221,48],"scope":"process","value":"null","type":"mixed"},{"kind":128,"name":"$injected_fields","location":[221,50,221,77],"scope":"process","value":"[]","type":"array"}]},{"kind":32,"name":"set_request_data","modifiers":1,"location":[247,4,252,5],"description":"Sets the data to be used for the request","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$data","location":[247,37,247,42],"scope":"set_request_data","type":"object"}]},{"kind":32,"name":"set_access","modifiers":1,"location":[262,4,267,5],"description":"Sets the request handler access object to handle the permissions/features\nrelated validations","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$access","location":[262,31,262,46],"scope":"set_access","typeSource":1,"type":"Huli\\Authorization\\IAccess"}]},{"kind":32,"name":"set_session","modifiers":1,"location":[276,4,281,5],"description":"Sets the request handler session object to get the authenticated user information","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$session","location":[276,32,276,49],"scope":"set_session","typeSource":1,"type":"Huli\\Authentication\\ISession"}]},{"kind":32,"name":"set_field","modifiers":1,"location":[292,4,305,5],"description":"Sets a field value to an object parameter","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$field","location":[292,30,292,36],"scope":"set_field","type":"string"},{"kind":128,"name":"$value","location":[292,38,292,44],"scope":"set_field","type":"mixed"},{"kind":128,"name":"$ignore_set_method","location":[292,46,292,64],"scope":"set_field","type":"bool"}]},{"kind":32,"name":"set_processed_field","modifiers":1,"location":[315,4,328,5],"description":"Sets a processed field","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$field","location":[315,40,315,46],"scope":"set_processed_field","type":"string"},{"kind":128,"name":"$value","location":[315,48,315,61],"scope":"set_processed_field","value":"null","type":"mixed"}]},{"kind":32,"name":"set_processed_object","modifiers":1,"location":[337,4,350,5],"description":"Sets the processed object data","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\$object","children":[{"kind":128,"name":"$object","location":[337,41,337,48],"scope":"set_processed_object","type":"object"}]},{"kind":32,"name":"get_processed_data","modifiers":1,"location":[357,4,360,5],"description":"Gets the object processed data","scope":"HH\\Request\\Behavior\\AHandler","type":"array"},{"kind":32,"name":"run_task_queue","modifiers":1,"location":[367,4,372,5],"description":"Execute the task queue","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler"},{"kind":32,"name":"get_handler_type","modifiers":18,"location":[377,4,377,51],"description":"Gets the handler type to use","scope":"HH\\Request\\Behavior\\AHandler"},{"kind":32,"name":"handle","modifiers":18,"location":[384,4,384,41],"description":"Request handler main method","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler"},{"kind":32,"name":"prepare","modifiers":2,"location":[395,4,401,5],"description":"Prepares a request setting the data and processing the fields required\nto handle it.","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$request_data","location":[395,31,395,44],"scope":"prepare","type":"mixed"},{"kind":128,"name":"$injected_fields","location":[395,46,395,68],"scope":"prepare","type":"array"}]},{"kind":32,"name":"prepare_many","modifiers":2,"location":[411,4,437,5],"description":"Prepares many requests as one","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$request_data","location":[411,36,411,55],"scope":"prepare_many","type":"array"},{"kind":128,"name":"$injected_fields","location":[411,57,411,79],"scope":"prepare_many","type":"array"}]},{"kind":32,"name":"get_session","modifiers":2,"location":[444,4,452,5],"description":"Retrieves (if exists) the value of session","scope":"HH\\Request\\Behavior\\AHandler","type":"Huli\\Authentication\\ISession"},{"kind":32,"name":"set_child_session","modifiers":2,"location":[461,4,468,5],"description":"Sets the session object (if exists) into child","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$object","location":[461,41,461,57],"scope":"set_child_session","typeSource":1,"type":"HH\\Request\\Behavior\\AHandler"}]},{"kind":32,"name":"has_access","modifiers":2,"location":[477,4,480,5],"description":"Checks whether a user has acess over the current handler or not\nThis is a virtual method, should be overriden in the requests implementations\nExample: return $this->access->has(Feature::PRACTICE_PATIENT_FILE_VIEW);","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler"},{"kind":32,"name":"get_handler_class","modifiers":2,"location":[489,4,494,5],"description":"Gets the request handler class","scope":"HH\\Request\\Behavior\\AHandler","type":"string","children":[{"kind":128,"name":"$formatted_for_error","location":[489,41,489,69],"description":"optionally formats the class for error messages\n","scope":"get_handler_class","value":"false","type":"bool"}]},{"kind":32,"name":"process_fields","modifiers":2,"location":[505,4,542,5],"description":"Process fields for a request\nValidates needed fields and required fields","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$request_fields","location":[505,38,505,59],"scope":"process_fields","type":"array"},{"kind":128,"name":"$injected_fields","location":[505,61,505,88],"scope":"process_fields","value":"[]","type":"array"}]},{"kind":32,"name":"set_status","modifiers":2,"location":[550,4,559,5],"description":"Common method to set the status and validates\nAll fields have status so is safe to put it here","scope":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$status","location":[550,34,550,41],"scope":"set_status","type":"int"}]},{"kind":32,"name":"get_request_value","modifiers":2,"location":[572,4,583,5],"description":"Gets the value of a field, either from injected values or request\nvalidates required fields","scope":"HH\\Request\\Behavior\\AHandler","type":"string","children":[{"kind":128,"name":"$field","location":[572,41,572,47],"scope":"get_request_value","type":"string"},{"kind":128,"name":"$field_type","location":[572,49,572,80],"scope":"get_request_value","value":"FieldType::SIMPLE","type":"string"},{"kind":128,"name":"$default_value","location":[572,82,572,103],"scope":"get_request_value","value":"null","type":"mixed"}]},{"kind":32,"name":"get_raw_value","modifiers":2,"location":[592,4,595,5],"description":"Gets the raw value of a field from a request","scope":"HH\\Request\\Behavior\\AHandler","type":"mixed","children":[{"kind":128,"name":"$field","location":[592,37,592,43],"scope":"get_raw_value","type":"string"}]},{"kind":32,"name":"get_children_options","modifiers":2,"location":[605,4,615,5],"description":"Gets the children request options\nSets the default values when non set","scope":"HH\\Request\\Behavior\\AHandler","type":"array","children":[{"kind":128,"name":"$children_request","location":[605,44,605,67],"scope":"get_children_options","type":"array"}]},{"kind":32,"name":"get_injected_fields","modifiers":2,"location":[625,4,644,5],"description":"Get the injected fields and its values","scope":"HH\\Request\\Behavior\\AHandler","type":"array","children":[{"kind":128,"name":"$injected_fields","location":[625,43,625,70],"scope":"get_injected_fields","value":"[]","type":"array"},{"kind":128,"name":"$source","location":[625,72,625,86],"scope":"get_injected_fields","value":"null","type":"object"}]},{"kind":32,"name":"is_injected_field","modifiers":4,"location":[653,4,656,5],"description":"Whether a field is part of the injected fields or not","scope":"HH\\Request\\Behavior\\AHandler","type":"bool","children":[{"kind":128,"name":"$field","location":[653,39,653,45],"scope":"is_injected_field","type":"string"}]},{"kind":32,"name":"is_valid_required_value","modifiers":4,"location":[663,4,674,5],"description":"Validates the required fields","scope":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$value","location":[663,45,663,51],"scope":"is_valid_required_value","type":"mixed"}]},{"kind":32,"name":"get_field_options","modifiers":4,"location":[684,4,723,5],"description":"Gets the config options for a fields","scope":"HH\\Request\\Behavior\\AHandler","type":"array","children":[{"kind":128,"name":"$options","location":[684,39,684,47],"scope":"get_field_options","type":"mixed"},{"kind":128,"name":"$field","location":[684,49,684,55],"scope":"get_field_options","type":"string"}]},{"kind":32,"name":"set_injected_fields","modifiers":4,"location":[732,4,737,5],"description":"Set the injected fields","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$injected_fields","location":[732,41,732,63],"scope":"set_injected_fields","type":"array"}]},{"kind":32,"name":"set_handler_type","modifiers":4,"location":[746,4,755,5],"description":"Validates and sets the handler type","scope":"HH\\Request\\Behavior\\AHandler","type":"HH\\Request\\Behavior\\AHandler","children":[{"kind":128,"name":"$handler_type","location":[746,38,746,51],"scope":"set_handler_type","type":"int"}]},{"kind":32,"name":"is_handler_type_list","modifiers":4,"location":[762,4,768,5],"description":"Returns whether the current handler type uses a list or not","scope":"HH\\Request\\Behavior\\AHandler","type":"bool"}]}]}}