{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/Payment/Customer.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"Payment","location":[12,0,12,18]},{"kind":1,"name":"Plans","modifiers":4096,"location":[14,5,14,26],"associated":[{"kind":1,"name":"HH\\Subscription\\Plans"}]},{"kind":1,"name":"Date","modifiers":4096,"location":[15,5,15,17],"associated":[{"kind":1,"name":"HH\\Util\\Date"}]},{"kind":1,"name":"IProcessor","modifiers":4096,"location":[16,5,16,23],"associated":[{"kind":1,"name":"Payment\\IProcessor"}]},{"kind":1,"name":"stdClass","modifiers":4096,"location":[17,5,17,13],"associated":[{"kind":1,"name":"stdClass"}]},{"kind":1,"name":"Payment\\Customer","modifiers":8,"location":[22,0,240,1],"description":"Customer entity handling: creation, update, etc","children":[{"kind":16,"name":"$id_user","modifiers":4,"location":[29,12,29,20],"scope":"Payment\\Customer","type":"int"},{"kind":16,"name":"$customer","modifiers":4,"location":[36,12,36,21],"scope":"Payment\\Customer","type":"stdClass"},{"kind":16,"name":"$processor_customer","modifiers":4,"location":[43,12,43,31],"scope":"Payment\\Customer","type":"Stripe\\Customer"},{"kind":32,"name":"__construct","modifiers":1,"location":[45,4,50,5],"description":"Customer result from save","scope":"Payment\\Customer","children":[{"kind":128,"name":"$id_user","location":[45,32,45,44],"scope":"__construct","typeSource":1,"type":"int"}]},{"kind":32,"name":"set_user","modifiers":1,"location":[61,4,67,5],"description":"User setter\nModifies customer object","scope":"Payment\\Customer","typeSource":1,"type":"Payment\\Customer","children":[{"kind":128,"name":"$display_name","location":[61,29,61,42],"scope":"set_user","type":"string"},{"kind":128,"name":"$email","location":[61,44,61,50],"scope":"set_user","type":"string"}]},{"kind":32,"name":"set_plan","modifiers":1,"location":[78,4,87,5],"description":"Plan setter\nModifies customer object","scope":"Payment\\Customer","typeSource":1,"type":"Payment\\Customer","children":[{"kind":128,"name":"$plan_name","location":[78,29,78,39],"scope":"set_plan","type":"string"},{"kind":128,"name":"$trial_end","location":[78,41,78,58],"description":"(Optional)\n","scope":"set_plan","value":"null","type":"Payment\\date|null"}]},{"kind":32,"name":"set_coupon","modifiers":1,"location":[96,4,101,5],"description":"Sets the coupon/promo code for the customer to be created.","scope":"Payment\\Customer","typeSource":1,"type":"Payment\\Customer","children":[{"kind":128,"name":"$coupon","location":[96,31,96,45],"scope":"set_coupon","typeSource":1,"type":"string"}]},{"kind":32,"name":"set_source","modifiers":1,"location":[111,4,116,5],"description":"Billing source setter\nModifies customer object","scope":"Payment\\Customer","typeSource":1,"type":"Payment\\Customer","children":[{"kind":128,"name":"$token","location":[111,31,111,37],"scope":"set_source","type":"Stripe\\Token"}]},{"kind":32,"name":"set_metadata","modifiers":1,"location":[126,4,134,5],"description":"Metadata setter\nModifies customer object","scope":"Payment\\Customer","typeSource":1,"type":"Payment\\Customer","children":[{"kind":128,"name":"$customer_metadata","location":[126,33,126,62],"description":"custom data to be store as reference on payment processor\n","scope":"set_metadata","value":"[]","type":"array"}]},{"kind":32,"name":"get_id","modifiers":1,"location":[141,4,144,5],"description":"Customer ID getter","scope":"Payment\\Customer","type":"string|null"},{"kind":32,"name":"get_subscription","modifiers":1,"location":[152,4,156,5],"description":"Retrieve processor customer subscription\nCurrently assume that customers have only one subscription","scope":"Payment\\Customer","type":"Stripe\\Subscription|null"},{"kind":32,"name":"get_trial_end","modifiers":1,"location":[166,4,183,5],"description":"Retrieve trial end on value from subscription\nOptionally processed by default for db purposes","scope":"Payment\\Customer","type":"Payment\\date|null","children":[{"kind":128,"name":"$processed","location":[166,34,166,56],"description":"change datatype for db storage\n","scope":"get_trial_end","value":"true","typeSource":1,"type":"bool"}]},{"kind":32,"name":"process_trial_end","modifiers":1,"location":[196,4,203,5],"description":"Define value to be store in db, so it is called AFTER payment processor","scope":"Payment\\Customer","typeSource":1,"type":"string","children":[{"kind":128,"name":"$trial_end","location":[196,38,196,48],"scope":"process_trial_end","type":"mixed"}]},{"kind":32,"name":"create_customer_with_plan_and_card","modifiers":1,"location":[214,4,227,5],"description":"Create a customer, assign a plan and card\nall in one request to the payment processor","scope":"Payment\\Customer","typeSource":1,"type":"bool","children":[{"kind":128,"name":"$processor","location":[214,55,214,76],"scope":"create_customer_with_plan_and_card","typeSource":1,"type":"Payment\\IProcessor"},{"kind":128,"name":"$skip_trial_check","location":[214,78,214,108],"scope":"create_customer_with_plan_and_card","value":"false","typeSource":1,"type":"bool"}]},{"kind":32,"name":"is_free_plan","modifiers":4,"location":[236,4,239,5],"description":"Detect if parameter plan variable matches free plan id","scope":"Payment\\Customer","typeSource":1,"type":"bool","children":[{"kind":128,"name":"$plan_name","location":[236,34,236,51],"scope":"is_free_plan","typeSource":1,"type":"string"}]}]}]}}