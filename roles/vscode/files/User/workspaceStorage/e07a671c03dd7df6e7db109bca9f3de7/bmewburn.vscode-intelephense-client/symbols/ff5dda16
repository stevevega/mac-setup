{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Subscription/Tag.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Subscription","location":[11,0,11,26]},{"kind":1,"name":"CommunicationHandler","modifiers":4096,"location":[13,5,13,50],"associated":[{"kind":1,"name":"Communication\\Handler"}]},{"kind":1,"name":"Session","modifiers":4096,"location":[14,5,14,46],"associated":[{"kind":1,"name":"Huli\\Authentication\\App\\Anonymous\\Session"}]},{"kind":1,"name":"UserModel","modifiers":4096,"location":[15,5,15,28],"associated":[{"kind":1,"name":"Model\\User"}]},{"kind":1,"name":"HH\\Subscription\\Tag","location":[34,0,147,1],"description":"Represents an enum of the tags that a user can have\n- Trialing customer: when a new user is within his trial period\n- Trial ending: when a new user has 3 or less days left of trial\n- Paying customer: when a user has an active paying account\n- Canceled: when a user cancels his accounts\n- Past Due: whenever a payment failed\n\nPossible states:\n- Trialing\n- Trialing customer + Past Due\n- Trialing customer + Trial ending\n- Trialing customer + Trial ending + Past Due\n- Paying customer\n- Paying customer + Past Due\n- Canceled","children":[{"kind":1024,"name":"NOTICE_INVALID_INTERCOM_USER","modifiers":1,"location":[37,10,38,117],"scope":"HH\\Subscription\\Tag","value":"\"Trying to update the tags of an Intercom-enabled user that doesn't exist in Intercom, id_user: %s, status: %s\""},{"kind":1024,"name":"TRIALING_CUSTOMER","modifiers":1,"location":[40,10,40,49],"scope":"HH\\Subscription\\Tag","value":"'trialing customer'"},{"kind":1024,"name":"TRIAL_ENDING","modifiers":1,"location":[41,10,41,39],"scope":"HH\\Subscription\\Tag","value":"'trial ending'"},{"kind":1024,"name":"PAYING_CUSTOMER","modifiers":1,"location":[42,10,42,45],"scope":"HH\\Subscription\\Tag","value":"'paying customer'"},{"kind":1024,"name":"PAST_DUE","modifiers":1,"location":[43,10,43,31],"scope":"HH\\Subscription\\Tag","value":"'past due'"},{"kind":1024,"name":"CANCELED","modifiers":1,"location":[44,10,44,31],"scope":"HH\\Subscription\\Tag","value":"'canceled'"},{"kind":1024,"name":"TAGS","modifiers":1,"location":[46,10,52,5],"scope":"HH\\Subscription\\Tag","value":"[\n        self::TRIALING_CUSTOMER,\n        self::TRIAL_ENDING,\n        self::PAYING_CUSTOMER,\n        self::PAST_DUE,\n        self::CANCELED\n    ]"},{"kind":16,"name":"$comm_handler","modifiers":4,"location":[54,12,54,25],"scope":"HH\\Subscription\\Tag"},{"kind":16,"name":"$user_tags","modifiers":4,"location":[56,12,56,22],"scope":"HH\\Subscription\\Tag"},{"kind":32,"name":"__construct","modifiers":1,"location":[58,4,61,5],"scope":"HH\\Subscription\\Tag"},{"kind":32,"name":"update","modifiers":1,"location":[69,4,74,5],"description":"Updates the status of the tags of a user","scope":"HH\\Subscription\\Tag","children":[{"kind":128,"name":"$user","location":[69,27,69,42],"scope":"update","typeSource":1,"type":"Model\\User"},{"kind":128,"name":"$status","location":[69,44,69,51],"scope":"update","type":"string"}]},{"kind":32,"name":"update_comm_handler","modifiers":1,"location":[82,4,93,5],"description":"Updates the status of the tags of a user in the communication handler","scope":"HH\\Subscription\\Tag","children":[{"kind":128,"name":"$id_user","location":[82,40,82,48],"scope":"update_comm_handler","type":"int"},{"kind":128,"name":"$status","location":[82,50,82,57],"scope":"update_comm_handler","type":"string"}]},{"kind":32,"name":"load_user_tags","modifiers":4,"location":[100,4,114,5],"description":"Loads the tags linked to the user in the communication handler","scope":"HH\\Subscription\\Tag","children":[{"kind":128,"name":"$user","location":[100,36,100,41],"scope":"load_user_tags"}]},{"kind":32,"name":"tag_based_on_new_status","modifiers":4,"location":[123,4,128,5],"description":"Adds the tags that the user should have based on the changes\nin the lifecycle","scope":"HH\\Subscription\\Tag","children":[{"kind":128,"name":"$id_user","location":[123,45,123,53],"scope":"tag_based_on_new_status","type":"int"},{"kind":128,"name":"$status","location":[123,55,123,62],"scope":"tag_based_on_new_status","type":"string"}]},{"kind":32,"name":"untag_based_on_new_status","modifiers":4,"location":[137,4,146,5],"description":"Removes all the tags that the user has linked that should no\nlonger be present.","scope":"HH\\Subscription\\Tag","children":[{"kind":128,"name":"$id_user","location":[137,47,137,55],"scope":"untag_based_on_new_status","type":"int"},{"kind":128,"name":"$status","location":[137,57,137,64],"scope":"untag_based_on_new_status","type":"string"}]}]}]}}