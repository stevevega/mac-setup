{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/Payment/Events/Invoice/Updated.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"Payment\\Events\\Invoice","location":[11,0,11,33]},{"kind":1,"name":"TResponse","modifiers":4096,"location":[13,5,13,22],"associated":[{"kind":1,"name":"HH\\Http\\TResponse"}]},{"kind":1,"name":"Error","modifiers":4096,"location":[14,5,14,15],"associated":[{"kind":1,"name":"Kima\\Error"}]},{"kind":1,"name":"UserSubscriptionModel","modifiers":4096,"location":[15,5,15,53],"associated":[{"kind":1,"name":"Model\\User\\Subscription"}]},{"kind":1,"name":"EventWrapper","modifiers":4096,"location":[16,5,16,54],"associated":[{"kind":1,"name":"Payment\\EventObject\\Invoice\\Event"}]},{"kind":1,"name":"ICallable","modifiers":4096,"location":[17,5,17,22],"associated":[{"kind":1,"name":"Payment\\ICallable"}]},{"kind":1,"name":"IEventObject","modifiers":4096,"location":[18,5,18,25],"associated":[{"kind":1,"name":"Payment\\IEventObject"}]},{"kind":1,"name":"IInvoiceItem","modifiers":4096,"location":[19,5,19,25],"associated":[{"kind":1,"name":"Payment\\IInvoiceItem"}]},{"kind":1,"name":"IProcessor","modifiers":4096,"location":[20,5,20,23],"associated":[{"kind":1,"name":"Payment\\IProcessor"}]},{"kind":1,"name":"InvoiceStore","modifiers":4096,"location":[21,5,21,42],"associated":[{"kind":1,"name":"Payment\\Store\\Invoice"}]},{"kind":1,"name":"Payment\\Events\\Invoice\\Updated","modifiers":8,"location":[26,0,191,1],"associated":[{"kind":2,"name":"Payment\\ICallable"},{"kind":4,"name":"HH\\Http\\TResponse"}],"description":"Handles events related to the invoice object","children":[{"kind":16,"name":"$event","modifiers":4,"location":[35,12,35,18],"scope":"Payment\\Events\\Invoice\\Updated","type":"Payment\\EventObject\\Invoice\\Event"},{"kind":1024,"name":"MSG","modifiers":1,"location":[40,10,40,21],"scope":"Payment\\Events\\Invoice\\Updated","value":"'msg'"},{"kind":1024,"name":"INFO_NOT_REOPENED","modifiers":1,"location":[43,10,43,66],"scope":"Payment\\Events\\Invoice\\Updated","value":"'Invoice was not reopened, skipping'"},{"kind":1024,"name":"INFO_INVOICE_NOT_STORED","modifiers":1,"location":[44,10,44,69],"scope":"Payment\\Events\\Invoice\\Updated","value":"'Invoice is not stored, skipping'"},{"kind":1024,"name":"INFO_INVOICE_ALREADY_PROCESSED","modifiers":1,"location":[45,10,45,80],"scope":"Payment\\Events\\Invoice\\Updated","value":"'Invoice already processed, skipping'"},{"kind":16,"name":"$total_added","modifiers":4,"location":[52,12,52,28],"scope":"Payment\\Events\\Invoice\\Updated","type":"int"},{"kind":32,"name":"__construct","modifiers":1,"location":[58,4,62,5],"scope":"Payment\\Events\\Invoice\\Updated","children":[{"kind":128,"name":"$event","location":[58,32,58,51],"description":"contains object event data","scope":"__construct","typeSource":1,"type":"Payment\\IEventObject"},{"kind":128,"name":"$processor","location":[58,53,58,74],"description":"payment processor","scope":"__construct","typeSource":1,"type":"Payment\\IProcessor"}]},{"kind":32,"name":"load","modifiers":4,"location":[69,4,78,5],"description":"Loads the event information","scope":"Payment\\Events\\Invoice\\Updated","children":[{"kind":128,"name":"$id_event","location":[69,26,69,35],"scope":"load","type":"string"}]},{"kind":32,"name":"run","modifiers":1,"location":[86,4,134,5],"description":"Processes the updated invoice event, checks the subscription against any\nmodification done in our side as well as adding line items to the invoice\nregarding addons that should be charged to the user and adds any remaining\ninvoice item that is yet to te added.","scope":"Payment\\Events\\Invoice\\Updated"},{"kind":32,"name":"get_total_added","modifiers":1,"location":[141,4,144,5],"description":"Retrieves the total amount of line items added to the current customer","scope":"Payment\\Events\\Invoice\\Updated","type":"int"},{"kind":32,"name":"add_invoice_item","modifiers":4,"location":[155,4,172,5],"description":"Adds an invoice line item for the customer according based on the data\nsupplied by the addons","scope":"Payment\\Events\\Invoice\\Updated","children":[{"kind":128,"name":"$item","location":[155,38,155,56],"description":"contains info about the addon such as\nprice and description","scope":"add_invoice_item","typeSource":1,"type":"Payment\\IInvoiceItem"},{"kind":128,"name":"$sub","location":[155,58,155,84],"description":"contains some subscription information","scope":"add_invoice_item","typeSource":1,"type":"Model\\User\\Subscription"},{"kind":128,"name":"$invoice","location":[155,86,155,94],"description":"contains the invoice data sent by stripe","scope":"add_invoice_item","type":"object"}]},{"kind":32,"name":"was_reopened","modifiers":4,"location":[180,4,190,5],"description":"Returns whether invoice object from stripe was changed from \"closed=true\"\nto \"closed=false\"","scope":"Payment\\Events\\Invoice\\Updated","type":"bool"}]}]}}