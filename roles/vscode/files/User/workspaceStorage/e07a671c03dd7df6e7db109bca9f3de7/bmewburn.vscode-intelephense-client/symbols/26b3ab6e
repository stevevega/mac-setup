{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Doctor/Review.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Doctor","location":[11,0,11,20]},{"kind":1,"name":"HHReviewCategory","modifiers":4096,"location":[13,5,13,50],"associated":[{"kind":1,"name":"HH\\Doctor\\Review\\Category"}]},{"kind":1,"name":"EntityDoctor","modifiers":4096,"location":[14,5,14,37],"associated":[{"kind":1,"name":"HH\\Entity\\Doctor"}]},{"kind":1,"name":"TResponse","modifiers":4096,"location":[15,5,15,22],"associated":[{"kind":1,"name":"HH\\Http\\TResponse"}]},{"kind":1,"name":"Language","modifiers":4096,"location":[16,5,16,16],"associated":[{"kind":1,"name":"HH\\Language"}]},{"kind":1,"name":"EventHandlingOperations","modifiers":4096,"location":[17,5,17,76],"associated":[{"kind":1,"name":"HH\\ServiceProviders\\EventHandling\\Operations"}]},{"kind":1,"name":"EventHandlingOrchestrator","modifiers":4096,"location":[18,5,18,80],"associated":[{"kind":1,"name":"HH\\ServiceProviders\\EventHandling\\Orchestrator"}]},{"kind":1,"name":"Status","modifiers":4096,"location":[19,5,19,14],"associated":[{"kind":1,"name":"HH\\Status"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[20,5,20,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"Cache","modifiers":4096,"location":[21,5,21,15],"associated":[{"kind":1,"name":"Kima\\Cache"}]},{"kind":1,"name":"Database","modifiers":4096,"location":[22,5,22,18],"associated":[{"kind":1,"name":"Kima\\Database"}]},{"kind":1,"name":"Model","modifiers":4096,"location":[23,5,23,15],"associated":[{"kind":1,"name":"Kima\\Model"}]},{"kind":1,"name":"App","modifiers":4096,"location":[24,5,24,19],"associated":[{"kind":1,"name":"Kima\\Prime\\App"}]},{"kind":1,"name":"KInt","modifiers":4096,"location":[25,5,25,19],"associated":[{"kind":1,"name":"Kima\\Util\\KInt"}]},{"kind":1,"name":"AppointmentModel","modifiers":4096,"location":[26,5,26,42],"associated":[{"kind":1,"name":"Model\\Appointment"}]},{"kind":1,"name":"Doctor","modifiers":4096,"location":[27,5,27,17],"associated":[{"kind":1,"name":"Model\\Doctor"}]},{"kind":1,"name":"DoctorReview","modifiers":4096,"location":[28,5,28,40],"associated":[{"kind":1,"name":"Model\\Doctor\\Review"}]},{"kind":1,"name":"ReviewCategory","modifiers":4096,"location":[29,5,29,51],"associated":[{"kind":1,"name":"Model\\Doctor\\Review\\Category"}]},{"kind":1,"name":"ReviewRating","modifiers":4096,"location":[30,5,30,47],"associated":[{"kind":1,"name":"Model\\Doctor\\Review\\Rating"}]},{"kind":1,"name":"Patient","modifiers":4096,"location":[31,5,31,18],"associated":[{"kind":1,"name":"Model\\Patient"}]},{"kind":1,"name":"PatientFile","modifiers":4096,"location":[32,5,32,38],"associated":[{"kind":1,"name":"Model\\Patient\\File"}]},{"kind":1,"name":"HH\\Doctor\\Review","location":[37,0,487,1],"associated":[{"kind":4,"name":"HH\\Http\\TResponse"}],"description":"Doctor Review library","children":[{"kind":1024,"name":"ERROR_INVALID_DOCTOR","modifiers":1,"location":[47,10,47,90],"scope":"HH\\Doctor\\Review","value":"'The doctor you are trying to create a review is invalid'"},{"kind":1024,"name":"ERROR_INVALID_PATIENT_REVIEW","modifiers":1,"location":[48,10,48,100],"scope":"HH\\Doctor\\Review","value":"'The patient review that is trying to be edited is invalid'"},{"kind":1024,"name":"ERROR_REVIEW_ALREADY_EXISTS","modifiers":1,"location":[49,10,49,129],"scope":"HH\\Doctor\\Review","value":"'Cannot create a new review for this doctor because the patient already created a review'"},{"kind":1024,"name":"ERROR_NO_APPOINTMENTS","modifiers":1,"location":[50,10,50,144],"scope":"HH\\Doctor\\Review","value":"'This patient cannot create a review for this doctor because it has no completed appointments with the doctor'"},{"kind":1024,"name":"ERROR_RATING_REQUIRED","modifiers":1,"location":[51,10,51,69],"scope":"HH\\Doctor\\Review","value":"'The main rating value is required'"},{"kind":1024,"name":"ERROR_COMMENT_TOO_SHORT","modifiers":1,"location":[52,10,52,110],"scope":"HH\\Doctor\\Review","value":"'The review comment is too short, needs to be at least %s characters long'"},{"kind":1024,"name":"ERROR_INVALID_STATUS","modifiers":1,"location":[53,10,53,70],"scope":"HH\\Doctor\\Review","value":"'The doctor review status is invalid'"},{"kind":1024,"name":"ERROR_INVALID_REVIEW_CATEGORY","modifiers":1,"location":[54,10,54,79],"scope":"HH\\Doctor\\Review","value":"'The review category \"%s\" is invalid'"},{"kind":1024,"name":"ERROR_INVALID_DOCTOR_REVIEW","modifiers":1,"location":[55,10,55,103],"scope":"HH\\Doctor\\Review","value":"'Reviews can be edited only for doctor published on Hulihealth'"},{"kind":1024,"name":"ID_DOCTOR_REVIEW","modifiers":1,"location":[60,10,60,47],"scope":"HH\\Doctor\\Review","value":"'id_doctor_review'"},{"kind":1024,"name":"ID_DOCTOR","modifiers":1,"location":[61,10,61,33],"scope":"HH\\Doctor\\Review","value":"'id_doctor'"},{"kind":1024,"name":"STATUS","modifiers":1,"location":[62,10,62,27],"scope":"HH\\Doctor\\Review","value":"'status'"},{"kind":1024,"name":"ID_PATIENT","modifiers":1,"location":[63,10,63,35],"scope":"HH\\Doctor\\Review","value":"'id_patient'"},{"kind":1024,"name":"ID_DOCTOR_REVIEW_CATEGORY","modifiers":1,"location":[64,10,64,65],"scope":"HH\\Doctor\\Review","value":"'id_doctor_review_category'"},{"kind":1024,"name":"RATING","modifiers":1,"location":[65,10,65,27],"scope":"HH\\Doctor\\Review","value":"'rating'"},{"kind":1024,"name":"REVIEW_MIN_LENGTH","modifiers":1,"location":[70,10,70,32],"scope":"HH\\Doctor\\Review","value":"50"},{"kind":1024,"name":"CACHE_KEY_FORMAT","modifiers":1,"location":[75,10,75,40],"scope":"HH\\Doctor\\Review","value":"'review_%s'"},{"kind":16,"name":"$main_review_category","modifiers":2,"location":[82,14,82,35],"scope":"HH\\Doctor\\Review","type":"int"},{"kind":32,"name":"get_reviews_by_id_doctor","modifiers":33,"location":[97,4,122,5],"description":"Gets the list of reviews for a doctor","scope":"HH\\Doctor\\Review","type":"Kima\\Model\\Resultset","children":[{"kind":128,"name":"$id_doctor","location":[98,8,98,18],"scope":"get_reviews_by_id_doctor","type":"int"},{"kind":128,"name":"$allowed_statuses","location":[99,8,99,31],"scope":"get_reviews_by_id_doctor","type":"array"},{"kind":128,"name":"$page","location":[100,8,100,17],"scope":"get_reviews_by_id_doctor","value":"1","type":"int"},{"kind":128,"name":"$results_per_page","location":[101,8,101,29],"scope":"get_reviews_by_id_doctor","value":"5","type":"int"},{"kind":128,"name":"$criteria","location":[102,8,102,22],"description":"search by patient name","scope":"get_reviews_by_id_doctor","value":"''","type":"string"},{"kind":128,"name":"$sort","location":[103,8,103,41],"description":"sort field","scope":"get_reviews_by_id_doctor","value":"DoctorReview::MODIFIED_ON","type":"string"},{"kind":128,"name":"$sort_asc","location":[104,8,104,37],"scope":"get_reviews_by_id_doctor","value":"Model::ORDER_DESC","type":"string"}]},{"kind":32,"name":"get_reviews_by_id_patient","modifiers":1,"location":[131,4,148,5],"description":"Gets the list of reviews for a patient","scope":"HH\\Doctor\\Review","type":"array","children":[{"kind":128,"name":"$id_patient","location":[131,46,131,57],"scope":"get_reviews_by_id_patient","type":"int"}]},{"kind":32,"name":"get_pending_by_patient_and_language","modifiers":1,"location":[158,4,163,5],"description":"Get the pending reviews for a Hulihealth patient","scope":"HH\\Doctor\\Review","type":"array","children":[{"kind":128,"name":"$id_patient","location":[158,56,158,67],"scope":"get_pending_by_patient_and_language","type":"int"},{"kind":128,"name":"$id_language","location":[158,69,158,81],"scope":"get_pending_by_patient_and_language","type":"int"}]},{"kind":32,"name":"get_patient_doctor_review","modifiers":1,"location":[174,4,208,5],"description":"Gets the doctor review of a patient\nUsed for review edition","scope":"HH\\Doctor\\Review","type":"HH\\Doctor\\Review","children":[{"kind":128,"name":"$doctor_url","location":[174,46,174,57],"scope":"get_patient_doctor_review","type":"string"},{"kind":128,"name":"$id_patient","location":[174,59,174,70],"scope":"get_patient_doctor_review","type":"int"}]},{"kind":32,"name":"save_review","modifiers":1,"location":[224,4,294,5],"description":"Saves a doctor review made by a patient","scope":"HH\\Doctor\\Review","type":"array","children":[{"kind":128,"name":"$session","location":[225,8,225,25],"scope":"save_review","typeSource":1,"type":"Huli\\Authentication\\ISession"},{"kind":128,"name":"$id_doctor","location":[226,8,226,18],"scope":"save_review","type":"int"},{"kind":128,"name":"$main_rating","location":[227,8,227,20],"scope":"save_review","type":"int"},{"kind":128,"name":"$comment","location":[228,8,228,16],"scope":"save_review","type":"string"},{"kind":128,"name":"$ratings","location":[229,8,229,22],"scope":"save_review","type":"array"},{"kind":128,"name":"$id_doctor_review","location":[230,8,230,32],"scope":"save_review","value":"null","type":"int"},{"kind":128,"name":"$id_patient","location":[231,8,231,26],"description":"only should be send from admin","scope":"save_review","value":"null","type":"int"},{"kind":128,"name":"$status","location":[232,8,232,35],"description":"default value should only be modified from admin\n","scope":"save_review","value":"Status::ON_REVIEW","type":"int"}]},{"kind":32,"name":"delete","modifiers":1,"location":[305,4,336,5],"description":"Deletes the doctor review","scope":"HH\\Doctor\\Review","type":"array","children":[{"kind":128,"name":"$session","location":[305,27,305,44],"scope":"delete","typeSource":1,"type":"Huli\\Authentication\\ISession"},{"kind":128,"name":"$id_doctor_review","location":[305,46,305,63],"scope":"delete","type":"int"},{"kind":128,"name":"$id_doctor","location":[305,65,305,75],"scope":"delete","type":"int"}]},{"kind":32,"name":"filter_by_hulihealth","modifiers":4,"location":[345,4,359,5],"description":"Filter reviews made only for doctor that are displayed on Hulihealth","scope":"HH\\Doctor\\Review","type":"array","children":[{"kind":128,"name":"$reviews","location":[345,42,345,56],"scope":"filter_by_hulihealth","type":"array"}]},{"kind":32,"name":"get_main_review_category","modifiers":4,"location":[364,4,380,5],"description":"Gets the main review category","scope":"HH\\Doctor\\Review"},{"kind":32,"name":"is_valid_review","modifiers":4,"location":[395,4,449,5],"description":"Makes sure the doctor review is valid","scope":"HH\\Doctor\\Review","type":"bool","children":[{"kind":128,"name":"$id_doctor_review","location":[396,8,396,25],"scope":"is_valid_review","type":"int"},{"kind":128,"name":"$id_patient","location":[397,8,397,19],"scope":"is_valid_review","type":"int"},{"kind":128,"name":"$id_doctor","location":[398,8,398,18],"scope":"is_valid_review","type":"int"},{"kind":128,"name":"$main_rating","location":[399,8,399,20],"scope":"is_valid_review","type":"int"},{"kind":128,"name":"$comment","location":[400,8,400,16],"scope":"is_valid_review","type":"string"},{"kind":128,"name":"$ratings","location":[401,8,401,22],"scope":"is_valid_review","type":"array"},{"kind":128,"name":"$status","location":[402,8,402,15],"scope":"is_valid_review","type":"int"}]},{"kind":32,"name":"get_rating_objects_list","modifiers":4,"location":[461,4,486,5],"description":"Gets the rating list object","scope":"HH\\Doctor\\Review","type":"array","children":[{"kind":128,"name":"$id_doctor_review","location":[461,45,461,62],"scope":"get_rating_objects_list","type":"int"},{"kind":128,"name":"$main_rating","location":[461,64,461,76],"scope":"get_rating_objects_list","type":"int"},{"kind":128,"name":"$comment","location":[461,78,461,86],"scope":"get_rating_objects_list","type":"string"},{"kind":128,"name":"$ratings","location":[461,88,461,102],"scope":"get_rating_objects_list","type":"array"}]}]}]}}