{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Mail/Handler/Charge/Mailer.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Mail\\Handler\\Charge","location":[12,0,12,33]},{"kind":1,"name":"MailHandler","modifiers":4096,"location":[14,5,14,24],"associated":[{"kind":1,"name":"HH\\Mail\\MailHandler"}]},{"kind":1,"name":"Template","modifiers":4096,"location":[15,5,15,26],"associated":[{"kind":1,"name":"HH\\Mail\\Util\\Template"}]},{"kind":1,"name":"Plans","modifiers":4096,"location":[16,5,16,26],"associated":[{"kind":1,"name":"HH\\Subscription\\Plans"}]},{"kind":1,"name":"SubsUtil","modifiers":4096,"location":[17,5,17,37],"associated":[{"kind":1,"name":"HH\\Subscription\\Util"}]},{"kind":1,"name":"Date","modifiers":4096,"location":[18,5,18,19],"associated":[{"kind":1,"name":"Huli\\Util\\Date"}]},{"kind":1,"name":"Error","modifiers":4096,"location":[19,5,19,15],"associated":[{"kind":1,"name":"Kima\\Error"}]},{"kind":1,"name":"L10n","modifiers":4096,"location":[20,5,20,14],"associated":[{"kind":1,"name":"Kima\\L10n"}]},{"kind":1,"name":"Composer","modifiers":4096,"location":[21,5,21,18],"associated":[{"kind":1,"name":"Mail\\Composer"}]},{"kind":1,"name":"UserModel","modifiers":4096,"location":[22,5,22,28],"associated":[{"kind":1,"name":"Model\\User"}]},{"kind":1,"name":"UserSubscriptionModel","modifiers":4096,"location":[23,5,23,53],"associated":[{"kind":1,"name":"Model\\User\\Subscription"}]},{"kind":1,"name":"Event","modifiers":4096,"location":[24,5,24,37],"associated":[{"kind":1,"name":"Payment\\EventObject\\Charge\\Event"}]},{"kind":1,"name":"PaymentProcessor","modifiers":4096,"location":[25,5,25,29],"associated":[{"kind":1,"name":"Payment\\PaymentProcessor"}]},{"kind":1,"name":"DateInterval","modifiers":4096,"location":[26,4,26,16],"associated":[{"kind":1,"name":"DateInterval"}]},{"kind":1,"name":"HH\\Mail\\Handler\\Charge\\Mailer","location":[31,0,318,1],"associated":[{"kind":1,"name":"HH\\Mail\\MailHandler"}],"description":"This class handles sending the email verification emails","children":[{"kind":1024,"name":"ID_EVENT","modifiers":1,"location":[33,10,33,31],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","value":"'id_event'"},{"kind":1024,"name":"SUCCEEDED","modifiers":1,"location":[34,10,34,33],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","value":"'succeeded'"},{"kind":1024,"name":"FAILED","modifiers":1,"location":[35,10,35,27],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","value":"'failed'"},{"kind":1024,"name":"ALIAS_ID_EVENT","modifiers":1,"location":[36,10,36,31],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","value":"'ev'"},{"kind":16,"name":"$tags","modifiers":2,"location":[38,14,38,38],"scope":"HH\\Mail\\Handler\\Charge\\Mailer"},{"kind":16,"name":"$request_fields","modifiers":36,"location":[40,19,42,5],"scope":"HH\\Mail\\Handler\\Charge\\Mailer"},{"kind":16,"name":"$sub","modifiers":4,"location":[49,12,49,16],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","type":"Model\\User\\Subscription"},{"kind":16,"name":"$event","modifiers":4,"location":[56,12,56,18],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","type":"Payment\\EventObject\\Charge\\Event"},{"kind":16,"name":"$processor","modifiers":4,"location":[63,12,63,22],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","type":"Payment\\PaymentProcessor"},{"kind":16,"name":"$user","modifiers":4,"location":[70,12,70,17],"scope":"HH\\Mail\\Handler\\Charge\\Mailer","type":"HH\\Mail\\Handler\\Charge\\Object"},{"kind":32,"name":"send","modifiers":1,"location":[77,4,102,5],"description":"Sends all the notifications related to charges/payments","scope":"HH\\Mail\\Handler\\Charge\\Mailer","children":[{"kind":128,"name":"$action","location":[77,25,77,39],"description":"event action (succeeded, failed)","scope":"send","typeSource":1,"type":"string"}]},{"kind":32,"name":"load_event","modifiers":4,"location":[109,4,120,5],"description":"Loads the event information from Stripe","scope":"HH\\Mail\\Handler\\Charge\\Mailer","typeSource":1,"type":"HH\\Mail\\Handler\\Charge\\Mailer"},{"kind":32,"name":"load_past_charges","modifiers":4,"location":[128,4,152,5],"description":"Loads all the customer's past charges in order to find if this is the\nfirst time that she has been successfully charged","scope":"HH\\Mail\\Handler\\Charge\\Mailer","typeSource":1,"type":"HH\\Mail\\Handler\\Charge\\Mailer"},{"kind":32,"name":"load_sub","modifiers":4,"location":[159,4,171,5],"description":"Loads the doctor subscription data stored in our servers","scope":"HH\\Mail\\Handler\\Charge\\Mailer","typeSource":1,"type":"HH\\Mail\\Handler\\Charge\\Mailer"},{"kind":32,"name":"load_user","modifiers":4,"location":[178,4,220,5],"description":"Loads the user data associated to the loaded subscription","scope":"HH\\Mail\\Handler\\Charge\\Mailer","typeSource":1,"type":"HH\\Mail\\Handler\\Charge\\Mailer"},{"kind":32,"name":"notify_admin","modifiers":4,"location":[227,4,262,5],"description":"Builds and sends and email to the admin account","scope":"HH\\Mail\\Handler\\Charge\\Mailer","typeSource":1,"type":"HH\\Mail\\Handler\\Charge\\void","children":[{"kind":128,"name":"$action","location":[227,34,227,48],"description":"either 'succeeded' or 'failed'","scope":"notify_admin","typeSource":1,"type":"string"}]},{"kind":32,"name":"notify_client","modifiers":4,"location":[269,4,317,5],"description":"Builds and sends an email to the client associated with the subscription.","scope":"HH\\Mail\\Handler\\Charge\\Mailer","typeSource":1,"type":"HH\\Mail\\Handler\\Charge\\void","children":[{"kind":128,"name":"$action","location":[269,35,269,49],"description":"either 'succeeded' or 'failed'","scope":"notify_client","typeSource":1,"type":"string"}]}]}]}}