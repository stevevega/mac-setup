{"uri":"file:///Users/vega/Code/huli/manager-web/src/scripts/Documents/orphan.php","root":{"kind":0,"name":"","children":[{"kind":1,"name":"HuliAws","modifiers":4096,"location":[2,5,2,16],"associated":[{"kind":1,"name":"Aws\\HuliAws"}]},{"kind":1,"name":"S3Client","modifiers":4096,"location":[3,5,3,20],"associated":[{"kind":1,"name":"Aws\\S3\\S3Client"}]},{"kind":1,"name":"AwsDeleteHandler","modifiers":4096,"location":[4,5,4,43],"associated":[{"kind":1,"name":"HH\\Util\\Aws\\Delete"}]},{"kind":1,"name":"UploadEncoder","modifiers":4096,"location":[5,5,5,30],"associated":[{"kind":1,"name":"HH\\Util\\Aws\\UploadEncoder"}]},{"kind":1,"name":"HHDate","modifiers":4096,"location":[6,5,6,27],"associated":[{"kind":1,"name":"HH\\Util\\Date"}]},{"kind":1,"name":"TConsoleInOut","modifiers":4096,"location":[7,5,7,33],"associated":[{"kind":1,"name":"HH\\Util\\Script\\TConsoleInOut"}]},{"kind":1,"name":"App","modifiers":4096,"location":[8,5,8,19],"associated":[{"kind":1,"name":"Kima\\Prime\\App"}]},{"kind":1,"name":"PatientDocumentModel","modifiers":4096,"location":[9,5,9,51],"associated":[{"kind":1,"name":"Model\\Patient\\Document"}]},{"kind":1,"name":"OrphanDocumentModel","modifiers":4096,"location":[10,5,10,56],"associated":[{"kind":1,"name":"Model\\Patient\\DocumentOrphan"}]},{"kind":1,"name":"Clean","location":[22,0,244,1],"associated":[{"kind":4,"name":"HH\\Util\\Script\\TConsoleInOut"}],"description":"Orphan clean class","children":[{"kind":1024,"name":"THUMBNAILS","modifiers":1,"location":[27,10,27,35],"scope":"Clean","value":"'thumbnails'"},{"kind":1024,"name":"DOCUMENTS","modifiers":1,"location":[28,10,28,33],"scope":"Clean","value":"'documents'"},{"kind":1024,"name":"IGNORE_DATE_PREFIX_FORMAT","modifiers":1,"location":[33,10,33,48],"scope":"Clean","value":"'%s/files'"},{"kind":1024,"name":"IGNORE_THUMBNAIL_DATE_PREFIX_FORMAT","modifiers":1,"location":[34,10,34,62],"scope":"Clean","value":"'thumbnail/%s'"},{"kind":1024,"name":"THUMBNAIL_DATE_PREFIX_FORMAT","modifiers":1,"location":[35,10,35,58],"scope":"Clean","value":"'thumbnail/%s/%s'"},{"kind":1024,"name":"LIMIT","modifiers":1,"location":[36,10,36,20],"scope":"Clean","value":"10"},{"kind":32,"name":"__construct","modifiers":1,"location":[41,4,80,5],"description":"Class constants","scope":"Clean"},{"kind":32,"name":"start","modifiers":1,"location":[82,4,126,5],"scope":"Clean","children":[{"kind":128,"name":"$args","location":[82,26,82,38],"scope":"start","value":"null"}]},{"kind":32,"name":"process_orphan_documents","modifiers":4,"location":[137,4,170,5],"description":"Process orphan documents","scope":"Clean","children":[{"kind":128,"name":"$s3_client","location":[138,8,138,27],"scope":"process_orphan_documents","typeSource":1,"type":"Aws\\S3\\S3Client"},{"kind":128,"name":"$bucket_name","location":[139,8,139,20],"scope":"process_orphan_documents","type":"String"},{"kind":128,"name":"$bucket_type","location":[140,8,140,20],"scope":"process_orphan_documents","type":"String"},{"kind":128,"name":"$orphan_list","location":[141,8,141,20],"scope":"process_orphan_documents","type":"array"},{"kind":128,"name":"$force","location":[142,8,142,14],"description":"force all the documents to be deleted","scope":"process_orphan_documents","type":"bool"}]},{"kind":32,"name":"get_documents_orphan_list","modifiers":4,"location":[180,4,205,5],"description":"Obtain the list of orphan documents that will be removed from the s3 bucket","scope":"Clean","children":[{"kind":128,"name":"$s3_client","location":[180,47,180,66],"scope":"get_documents_orphan_list","typeSource":1,"type":"Aws\\S3\\S3Client"},{"kind":128,"name":"$document_bucket","location":[180,68,180,84],"scope":"get_documents_orphan_list","type":"string"},{"kind":128,"name":"$enviroment","location":[180,86,180,97],"scope":"get_documents_orphan_list","type":"string"},{"kind":128,"name":"$ignore","location":[180,99,180,106],"scope":"get_documents_orphan_list","type":"string"}]},{"kind":32,"name":"get_thumbnails_orphan_list","modifiers":4,"location":[215,4,243,5],"description":"Obtain the list of orphan documents that will be removed from the s3 bucket","scope":"Clean","children":[{"kind":128,"name":"$s3_client","location":[215,48,215,67],"scope":"get_thumbnails_orphan_list","typeSource":1,"type":"Aws\\S3\\S3Client"},{"kind":128,"name":"$thumbnail_bucket","location":[215,69,215,86],"scope":"get_thumbnails_orphan_list"},{"kind":128,"name":"$enviroment","location":[215,88,215,99],"scope":"get_thumbnails_orphan_list","type":"string"},{"kind":128,"name":"$ignore","location":[215,101,215,108],"scope":"get_thumbnails_orphan_list","type":"string"}]}]},{"kind":256,"name":"$clean","location":[246,0,246,6]}]}}