{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Mail/Handler/Appointment/UserActionsMailer.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Mail\\Handler\\Appointment","location":[11,0,11,38]},{"kind":1,"name":"AppointmentStatus","modifiers":4096,"location":[13,5,13,62],"associated":[{"kind":1,"name":"HH\\Calendar\\Event\\Appointment\\Status"}]},{"kind":1,"name":"Instance","modifiers":4096,"location":[14,5,14,16],"associated":[{"kind":1,"name":"HH\\Instance"}]},{"kind":1,"name":"ApptBase","modifiers":4096,"location":[15,5,15,49],"associated":[{"kind":1,"name":"HH\\Mail\\Handler\\Appointment\\Base"}]},{"kind":1,"name":"SettingByStatus","modifiers":4096,"location":[16,5,16,53],"associated":[{"kind":1,"name":"HH\\Mail\\User\\Setting\\ByStatus"}]},{"kind":1,"name":"Template","modifiers":4096,"location":[17,5,17,26],"associated":[{"kind":1,"name":"HH\\Mail\\Util\\Template"}]},{"kind":1,"name":"Role","modifiers":4096,"location":[18,5,18,17],"associated":[{"kind":1,"name":"HH\\User\\Role"}]},{"kind":1,"name":"AppointmentSource","modifiers":4096,"location":[19,5,19,58],"associated":[{"kind":1,"name":"Huli\\Enum\\Set\\Appointment\\Source"}]},{"kind":1,"name":"Error","modifiers":4096,"location":[20,5,20,15],"associated":[{"kind":1,"name":"Kima\\Error"}]},{"kind":1,"name":"L10n","modifiers":4096,"location":[21,5,21,14],"associated":[{"kind":1,"name":"Kima\\L10n"}]},{"kind":1,"name":"Composer","modifiers":4096,"location":[22,5,22,18],"associated":[{"kind":1,"name":"Mail\\Composer"}]},{"kind":1,"name":"Calendar","modifiers":4096,"location":[23,5,23,19],"associated":[{"kind":1,"name":"Model\\Calendar"}]},{"kind":1,"name":"PatientFile","modifiers":4096,"location":[24,5,24,38],"associated":[{"kind":1,"name":"Model\\Patient\\File"}]},{"kind":1,"name":"UserModel","modifiers":4096,"location":[25,5,25,28],"associated":[{"kind":1,"name":"Model\\User"}]},{"kind":1,"name":"Reply","modifiers":4096,"location":[26,5,26,59],"associated":[{"kind":1,"name":"Webhooks\\Mandrill\\Inbound\\Appointment\\Process"}]},{"kind":1,"name":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","modifiers":8,"location":[41,0,671,1],"associated":[{"kind":1,"name":"HH\\Mail\\Handler\\Appointment\\Base"}],"description":"This class handles all the mail notification related to appointment\nuser events such as appt creation, rescheduling, etc\n\nPLEASE UPDATE THIS LIST IN CASE YOU MODIFY ANY OF THE FOLLOWING BEHAVIORS!!!\n\nAppointment modified:\n- By patient: notify assistant, patient, doctor, admin.\n- By doctor/assistant:\n- If patient has HH account: notify assistant, admin, doctor, patient.\n- If patient doesn't have HH account: notify only patient.\n- By doctor manager: notify assistant, patient, doctor, admin.","children":[{"kind":1024,"name":"TAG_APPT_BOOKED","modifiers":1,"location":[46,10,46,48],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'appointment-booked'"},{"kind":1024,"name":"TAG_APPT_RESCHED","modifiers":1,"location":[47,10,47,54],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'appointment-rescheduled'"},{"kind":1024,"name":"TAG_APPT_CANCELLED","modifiers":1,"location":[48,10,48,54],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'appointment-cancelled'"},{"kind":1024,"name":"TAG_APPT_NO_SHOW","modifiers":1,"location":[49,10,49,50],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'appointment-no-show'"},{"kind":1024,"name":"BOOKED","modifiers":1,"location":[54,10,54,27],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'booked'"},{"kind":1024,"name":"RESCHED","modifiers":1,"location":[55,10,55,29],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'resched'"},{"kind":1024,"name":"CANCELLED","modifiers":1,"location":[56,10,56,33],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'cancelled'"},{"kind":1024,"name":"NO_SHOW","modifiers":1,"location":[57,10,57,29],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","value":"'no_show'"},{"kind":16,"name":"$notification","modifiers":4,"location":[65,12,70,5],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"array"},{"kind":16,"name":"$status_tags","modifiers":4,"location":[77,12,82,5],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"array"},{"kind":16,"name":"$fields_appointment","modifiers":36,"location":[89,19,92,5],"scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"array"},{"kind":32,"name":"send","modifiers":1,"location":[97,4,127,5],"description":"Sends all the emails related to an appointment change","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer"},{"kind":32,"name":"load_users","modifiers":4,"location":[134,4,147,5],"description":"Loads data for users that have created/modified the appointment","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"HH\\Mail\\Handler\\Appointment\\Object"},{"kind":32,"name":"notify","modifiers":4,"location":[154,4,218,5],"description":"Sends a notification to every user type related to the appointment","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","children":[{"kind":128,"name":"$status","location":[154,28,154,35],"description":"status key data","scope":"notify","type":"string"}]},{"kind":32,"name":"notify_patient","modifiers":4,"location":[227,4,290,5],"description":"Notifies a patient with a HuliHealth account","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"HH\\Mail\\Handler\\Appointment\\Object","children":[{"kind":128,"name":"$status","location":[227,36,227,43],"description":"status key\n","scope":"notify_patient","type":"string"}]},{"kind":32,"name":"notify_patient_no_account","modifiers":4,"location":[299,4,358,5],"description":"Notifies a patient with no HuliHealth account","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"HH\\Mail\\Handler\\Appointment\\Object","children":[{"kind":128,"name":"$status","location":[299,47,299,54],"description":"status key\n","scope":"notify_patient_no_account","type":"string"}]},{"kind":32,"name":"notify_patient_search","modifiers":4,"location":[367,4,428,5],"description":"Notifies a patient that made the appointment through a HuliSearch instance","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"HH\\Mail\\Handler\\Appointment\\Object","children":[{"kind":128,"name":"$status","location":[367,43,367,50],"description":"status key\n","scope":"notify_patient_search","type":"string"}]},{"kind":32,"name":"notify_doctor","modifiers":4,"location":[437,4,486,5],"description":"Notifies a doctor about an appointment change","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"object","children":[{"kind":128,"name":"$status","location":[437,35,437,42],"description":"status key\n","scope":"notify_doctor","type":"string"}]},{"kind":32,"name":"notify_assistant","modifiers":4,"location":[496,4,549,5],"description":"Notifies an assistant about an appointment change","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"object","children":[{"kind":128,"name":"$assistant","location":[496,38,496,48],"description":"asssitant user data","scope":"notify_assistant","type":"User"},{"kind":128,"name":"$status","location":[496,50,496,57],"description":"status key\n","scope":"notify_assistant","type":"string"}]},{"kind":32,"name":"notify_admin","modifiers":4,"location":[558,4,604,5],"description":"Notifies the admin about the appointment change","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"object","children":[{"kind":128,"name":"$status","location":[558,34,558,41],"description":"status key\n","scope":"notify_admin","type":"string"}]},{"kind":32,"name":"add_status_params","modifiers":4,"location":[612,4,643,5],"description":"Adds some template parameters that are status dependant but general in use","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","children":[{"kind":128,"name":"$params","location":[612,39,612,47],"description":"current template params","scope":"add_status_params","type":"array"},{"kind":128,"name":"$status","location":[612,49,612,56],"description":"status key","scope":"add_status_params","type":"string"}]},{"kind":32,"name":"render_reminder_patient_footer","modifiers":4,"location":[650,4,657,5],"description":"Sets the footer of the mail for patient that have hh acount","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","children":[{"kind":128,"name":"$template","location":[650,52,650,61],"scope":"render_reminder_patient_footer","type":"string"},{"kind":128,"name":"$call_to_action_link","location":[650,63,650,83],"scope":"render_reminder_patient_footer"}]},{"kind":32,"name":"is_incomplete_hulivida_patient","modifiers":4,"location":[664,4,670,5],"description":"Validates if the action_user is a HuliVida Patient and has the profile onboarding completed","scope":"HH\\Mail\\Handler\\Appointment\\UserActionsMailer","type":"bool"}]}]}}