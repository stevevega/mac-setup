{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Subscription/Flow/InstantTermination.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Subscription\\Flow","location":[11,0,11,31]},{"kind":1,"name":"ICommunication","modifiers":4096,"location":[13,5,13,33],"associated":[{"kind":1,"name":"Communication\\ICommunication"}]},{"kind":1,"name":"TCommunication","modifiers":4096,"location":[14,5,14,33],"associated":[{"kind":1,"name":"Communication\\TCommunication"}]},{"kind":1,"name":"TResponse","modifiers":4096,"location":[15,5,15,22],"associated":[{"kind":1,"name":"HH\\Http\\TResponse"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[16,5,16,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"UserModel","modifiers":4096,"location":[17,5,17,28],"associated":[{"kind":1,"name":"Model\\User"}]},{"kind":1,"name":"PaymentProcessor","modifiers":4096,"location":[18,5,18,29],"associated":[{"kind":1,"name":"Payment\\PaymentProcessor"}]},{"kind":1,"name":"HH\\Subscription\\Flow\\InstantTermination","location":[29,0,244,1],"associated":[{"kind":2,"name":"HH\\Subscription\\Flow\\IFlow"},{"kind":2,"name":"Communication\\ICommunication"},{"kind":4,"name":"HH\\Http\\TResponse"},{"kind":4,"name":"Communication\\TCommunication"}],"description":"Subscriptions flow: INSTANT TERMINATION\n\nCancels subscription immediately and terminates user account. Consider using\n\\HH\\Subscription\\Flow\\Unsubscribe instead of calling this flow directly.\n\nNo differences for user with SaaS instances. Only supports termination\nfor doctor users.","children":[{"kind":1024,"name":"ERROR_DEACTIVATE_ACCOUNT","modifiers":1,"location":[34,10,34,70],"scope":"HH\\Subscription\\Flow\\InstantTermination","value":"'unable_to_deactivate_account_%s'"},{"kind":16,"name":"$params","modifiers":4,"location":[41,12,41,26],"scope":"HH\\Subscription\\Flow\\InstantTermination","type":"mixed"},{"kind":16,"name":"$termination","modifiers":4,"location":[48,12,48,24],"scope":"HH\\Subscription\\Flow\\InstantTermination","type":"HH\\Subscription\\Flow\\Termination"},{"kind":32,"name":"__construct","modifiers":1,"location":[60,4,64,5],"description":"Flow constructor as setup","scope":"HH\\Subscription\\Flow\\InstantTermination","type":"HH\\Subscription\\Flow\\InstantTermination","children":[{"kind":128,"name":"$session","location":[60,32,60,49],"scope":"__construct","typeSource":1,"type":"Huli\\Authentication\\ISession"},{"kind":128,"name":"$params","location":[60,51,60,58],"description":"setup params\n- id_user:     int      doctor user id\n- reason_key:  string (optional)\n- reason_text: string (optional)\n","scope":"__construct","type":"object"}]},{"kind":32,"name":"execute","modifiers":1,"location":[71,4,86,5],"description":"Flow execution trigger","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"bool"},{"kind":32,"name":"notify","modifiers":1,"location":[94,4,103,5],"description":"Flow notifications trigger\nUsed mostly for trigger events like emails","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"bool"},{"kind":32,"name":"cancel_addons","modifiers":4,"location":[110,4,119,5],"description":"Cancels all the addons that the user might have enabled.","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\InstantTermination"},{"kind":32,"name":"cancel_subscription","modifiers":4,"location":[126,4,135,5],"description":"Permanently deactivates the account.","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\InstantTermination"},{"kind":32,"name":"deactivate_account","modifiers":4,"location":[142,4,155,5],"description":"Deactivates the user account","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\InstantTermination"},{"kind":32,"name":"delete_customer","modifiers":4,"location":[162,4,165,5],"description":"Deletes customer information from several sources","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\InstantTermination"},{"kind":32,"name":"delete_from_payment_processor","modifiers":4,"location":[176,4,208,5],"description":"Deletes customer from payment processor (ie. Stripe)\nUpon deleting:\n- all subscriptions are immediately cancelled\n- associated cards are deleted\n- invoices are not closed (keep in mind paid due)","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\InstantTermination"},{"kind":32,"name":"delete_from_communication_tool","modifiers":4,"location":[219,4,226,5],"description":"Deletes the customer information from the communication tool (ie. Intercom)\nUpon deleting:\n- user is marked as canceled\n- conversations and message history will be deleted\n- Lead (contact) object is returned","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\InstantTermination"},{"kind":32,"name":"remove_hulihealth_instance","modifiers":4,"location":[234,4,243,5],"description":"Deactivates the Hulihealth instances (aka main instance)\nOn unsubscribe, remove HH instance as it needs to be reviewed for reactivation","scope":"HH\\Subscription\\Flow\\InstantTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\InstantTermination"}]}]}}