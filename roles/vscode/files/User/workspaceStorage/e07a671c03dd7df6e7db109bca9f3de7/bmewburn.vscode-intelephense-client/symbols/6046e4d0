{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/Communication/Handler.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"Communication","location":[11,0,11,24]},{"kind":1,"name":"ICommHandler","modifiers":4096,"location":[13,5,13,43],"associated":[{"kind":1,"name":"Communication\\IHandler"}]},{"kind":1,"name":"Status","modifiers":4096,"location":[14,5,14,14],"associated":[{"kind":1,"name":"HH\\Status"}]},{"kind":1,"name":"Trial","modifiers":4096,"location":[15,5,15,26],"associated":[{"kind":1,"name":"HH\\Subscription\\Trial"}]},{"kind":1,"name":"Role","modifiers":4096,"location":[16,5,16,17],"associated":[{"kind":1,"name":"HH\\User\\Role"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[17,5,17,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"IAccess","modifiers":4096,"location":[18,5,18,31],"associated":[{"kind":1,"name":"Huli\\Authorization\\IAccess"}]},{"kind":1,"name":"ClinicModel","modifiers":4096,"location":[19,5,19,32],"associated":[{"kind":1,"name":"Model\\Clinic"}]},{"kind":1,"name":"DoctorModel","modifiers":4096,"location":[20,5,20,32],"associated":[{"kind":1,"name":"Model\\Doctor"}]},{"kind":1,"name":"UserModel","modifiers":4096,"location":[21,5,21,28],"associated":[{"kind":1,"name":"Model\\User"}]},{"kind":1,"name":"UserSubscriptionModel","modifiers":4096,"location":[22,5,22,53],"associated":[{"kind":1,"name":"Model\\User\\Subscription"}]},{"kind":1,"name":"Communication\\Handler","location":[27,0,492,1],"associated":[{"kind":2,"name":"Communication\\IHandler"}],"description":"This class is the proxy between the application and the Intercom API","children":[{"kind":1024,"name":"USER_ID","modifiers":1,"location":[33,10,33,29],"scope":"Communication\\Handler","value":"'user_id'"},{"kind":1024,"name":"EMAIL","modifiers":1,"location":[34,10,34,25],"scope":"Communication\\Handler","value":"'email'"},{"kind":1024,"name":"NAME","modifiers":1,"location":[35,10,35,23],"scope":"Communication\\Handler","value":"'name'"},{"kind":1024,"name":"CUSTOM_ATTRIBUTES","modifiers":1,"location":[36,10,36,49],"scope":"Communication\\Handler","value":"'custom_attributes'"},{"kind":1024,"name":"COMPANIES","modifiers":1,"location":[37,10,37,33],"scope":"Communication\\Handler","value":"'companies'"},{"kind":1024,"name":"COMPANY_ID","modifiers":1,"location":[38,10,38,35],"scope":"Communication\\Handler","value":"'company_id'"},{"kind":1024,"name":"REMOVE","modifiers":1,"location":[39,10,39,27],"scope":"Communication\\Handler","value":"'remove'"},{"kind":1024,"name":"EVENT_NAME","modifiers":1,"location":[40,10,40,35],"scope":"Communication\\Handler","value":"'event_name'"},{"kind":1024,"name":"METADATA","modifiers":1,"location":[41,10,41,31],"scope":"Communication\\Handler","value":"'metadata'"},{"kind":1024,"name":"CREATED_AT","modifiers":1,"location":[42,10,42,35],"scope":"Communication\\Handler","value":"'created_at'"},{"kind":1024,"name":"USERS","modifiers":1,"location":[43,10,43,25],"scope":"Communication\\Handler","value":"'users'"},{"kind":1024,"name":"UNTAG","modifiers":1,"location":[44,10,44,25],"scope":"Communication\\Handler","value":"'untag'"},{"kind":1024,"name":"ROLE","modifiers":1,"location":[50,10,50,23],"scope":"Communication\\Handler","value":"'Role'"},{"kind":1024,"name":"COUNTRY","modifiers":1,"location":[51,10,51,29],"scope":"Communication\\Handler","value":"'Country'"},{"kind":1024,"name":"LANGUAGE","modifiers":1,"location":[52,10,52,41],"scope":"Communication\\Handler","value":"'Preferred language'"},{"kind":1024,"name":"PLAN","modifiers":1,"location":[53,10,53,23],"scope":"Communication\\Handler","value":"'Plan'"},{"kind":1024,"name":"PUBLISHED","modifiers":1,"location":[54,10,54,38],"scope":"Communication\\Handler","value":"'Publish status'"},{"kind":1024,"name":"NO_OF_ASSISTANTS","modifiers":1,"location":[55,10,55,41],"scope":"Communication\\Handler","value":"'Assistants'"},{"kind":1024,"name":"NO_OF_DOCTORS","modifiers":1,"location":[56,10,56,35],"scope":"Communication\\Handler","value":"'Doctors'"},{"kind":1024,"name":"NO_OF_CLINICS","modifiers":1,"location":[57,10,57,35],"scope":"Communication\\Handler","value":"'Clinics'"},{"kind":1024,"name":"HAS_PHOTO","modifiers":1,"location":[58,10,58,33],"scope":"Communication\\Handler","value":"'Has photo'"},{"kind":1024,"name":"HAS_PAYMENT_METHOD","modifiers":1,"location":[59,10,59,51],"scope":"Communication\\Handler","value":"'Has payment method'"},{"kind":1024,"name":"TRIAL_END_ON","modifiers":1,"location":[60,10,60,39],"scope":"Communication\\Handler","value":"'Trial end on'"},{"kind":1024,"name":"TRIAL_GRACE_HOURS","modifiers":1,"location":[61,10,61,49],"scope":"Communication\\Handler","value":"'Trial grace hours'"},{"kind":1024,"name":"SOURCE","modifiers":1,"location":[62,10,62,31],"scope":"Communication\\Handler","value":"'UTM Source'"},{"kind":1024,"name":"CAMPAIGN","modifiers":1,"location":[63,10,63,35],"scope":"Communication\\Handler","value":"'UTM Campaign'"},{"kind":1024,"name":"CONTENT","modifiers":1,"location":[64,10,64,33],"scope":"Communication\\Handler","value":"'UTM Content'"},{"kind":1024,"name":"TERM","modifiers":1,"location":[65,10,65,27],"scope":"Communication\\Handler","value":"'UTM Term'"},{"kind":1024,"name":"MEDIUM","modifiers":1,"location":[66,10,66,31],"scope":"Communication\\Handler","value":"'UTM Medium'"},{"kind":1024,"name":"HAS_LOCATION","modifiers":1,"location":[71,10,71,39],"scope":"Communication\\Handler","value":"'Has location'"},{"kind":1024,"name":"IS_CLOSED_CLINIC","modifiers":1,"location":[72,10,72,47],"scope":"Communication\\Handler","value":"'Is closed clinic'"},{"kind":1024,"name":"INSTALLED_FACEBOOK_WIDGET","modifiers":1,"location":[77,10,77,65],"scope":"Communication\\Handler","value":"'Installed Facebook Widget'"},{"kind":1024,"name":"PAYMENT_SUCCEED","modifiers":1,"location":[78,10,78,45],"scope":"Communication\\Handler","value":"'Payment Succeed'"},{"kind":1024,"name":"PAYMENT_FAILED","modifiers":1,"location":[79,10,79,43],"scope":"Communication\\Handler","value":"'Payment Failed'"},{"kind":32,"name":"__construct","modifiers":1,"location":[88,4,91,5],"description":"Creates a new object","scope":"Communication\\Handler","children":[{"kind":128,"name":"$session","location":[88,32,88,56],"scope":"__construct","value":"null","typeSource":1,"type":"Huli\\Authentication\\ISession"},{"kind":128,"name":"$access","location":[88,58,88,80],"scope":"__construct","value":"null","typeSource":1,"type":"Huli\\Authorization\\IAccess"},{"kind":128,"name":"$override_access","location":[88,82,88,106],"scope":"__construct","value":"false","type":"Communication\\Boolean"}]},{"kind":32,"name":"get_customer_data","modifiers":1,"location":[101,4,104,5],"description":"Gets the information stored in the communication handler\nof an specific user based on the id;","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[101,38,101,46],"scope":"get_customer_data","type":"int"}]},{"kind":32,"name":"update_customer_data","modifiers":1,"location":[114,4,130,5],"description":"Updates the information stored in the communication tool in order to\nkeep consistency between the registries.","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[114,41,114,49],"scope":"update_customer_data","type":"int"}]},{"kind":32,"name":"tag_customer","modifiers":1,"location":[141,4,158,5],"description":"Adds or removes the tag of a customer","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[141,33,141,41],"scope":"tag_customer","type":"int"},{"kind":128,"name":"$tag","location":[141,43,141,47],"scope":"tag_customer","type":"string"},{"kind":128,"name":"$untag","location":[141,49,141,63],"scope":"tag_customer","value":"false","type":"bool"}]},{"kind":32,"name":"untag_customer","modifiers":1,"location":[168,4,171,5],"description":"Removes the tag of a user","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[168,35,168,43],"scope":"untag_customer","type":"int"},{"kind":128,"name":"$tag","location":[168,45,168,49],"scope":"untag_customer","type":"string"}]},{"kind":32,"name":"update_assistants","modifiers":1,"location":[182,4,235,5],"description":"Used to update the information of the customers when there are\nassistants or doctors updated.","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[182,38,182,46],"scope":"update_assistants","type":"int"},{"kind":128,"name":"$assistants","location":[182,48,182,59],"scope":"update_assistants","type":"array"}]},{"kind":32,"name":"update_single_customer_data","modifiers":1,"location":[246,4,262,5],"description":"Updates a single custom attribute for a particular customer","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[246,48,246,56],"scope":"update_single_customer_data","type":"int"},{"kind":128,"name":"$attribute_name","location":[246,58,246,73],"scope":"update_single_customer_data","type":"string"},{"kind":128,"name":"$attribute_value","location":[246,75,246,91],"scope":"update_single_customer_data","type":"object"}]},{"kind":32,"name":"update_clinics","modifiers":1,"location":[271,4,298,5],"description":"Updates all the clinics linked to a user","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[271,35,271,43],"scope":"update_clinics","type":"int"}]},{"kind":32,"name":"update_company_data","modifiers":1,"location":[307,4,316,5],"description":"Synchs the information of a clinic, which represents a company in Intercom","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_clinic","location":[307,40,307,50],"scope":"update_company_data","type":"int"}]},{"kind":32,"name":"delete_customer","modifiers":1,"location":[326,4,331,5],"description":"Deletes a user from the communication tool when is no longer\ngoing to be used.","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[326,36,326,44],"scope":"delete_customer","type":"int"}]},{"kind":32,"name":"track_event","modifiers":1,"location":[342,4,354,5],"description":"Tracks an user event","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[342,32,342,40],"scope":"track_event","type":"int"},{"kind":128,"name":"$name","location":[342,42,342,47],"scope":"track_event","type":"Communication\\String"},{"kind":128,"name":"$metadata","location":[342,49,342,63],"scope":"track_event","value":"[]"}]},{"kind":32,"name":"track_charge_succeeded","modifiers":1,"location":[364,4,367,5],"description":"Tracks a succesfull payment event","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[364,43,364,51],"scope":"track_charge_succeeded","type":"int"},{"kind":128,"name":"$amount","location":[364,53,364,60],"scope":"track_charge_succeeded","type":"int"}]},{"kind":32,"name":"track_charge_failed","modifiers":1,"location":[377,4,380,5],"description":"Tracks a failed payment event","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[377,40,377,48],"scope":"track_charge_failed","type":"int"},{"kind":128,"name":"$amount","location":[377,50,377,57],"scope":"track_charge_failed","type":"int"}]},{"kind":32,"name":"track_charge","modifiers":4,"location":[391,4,398,5],"description":"Tracks a  payment event","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$id_user","location":[391,34,391,42],"scope":"track_charge","type":"int"},{"kind":128,"name":"$amount","location":[391,44,391,51],"scope":"track_charge","type":"int"},{"kind":128,"name":"$type","location":[391,53,391,58],"scope":"track_charge","type":"Communication\\String"}]},{"kind":32,"name":"get_clinic_info","modifiers":4,"location":[407,4,413,5],"description":"Format the clinic information based on an id_clinic","scope":"Communication\\Handler","type":"array","children":[{"kind":128,"name":"$id_clinic","location":[407,37,407,47],"scope":"get_clinic_info","type":"int"}]},{"kind":32,"name":"format_clinic","modifiers":4,"location":[423,4,437,5],"description":"Organizes the information in a format compliant with\nthe Intercom standard.","scope":"Communication\\Handler","type":"array","children":[{"kind":128,"name":"$clinic","location":[423,35,423,42],"description":"an instance of the clinic model\n","scope":"format_clinic","type":"Model\\Clinic"}]},{"kind":32,"name":"get_custom_attributes","modifiers":4,"location":[447,4,491,5],"description":"When updating a user, this function returns custom attributes\nthat are tracked based on the user role.","scope":"Communication\\Handler","type":"object","children":[{"kind":128,"name":"$user","location":[447,43,447,48],"scope":"get_custom_attributes"}]}]}]}}