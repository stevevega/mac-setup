{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Subscription/Flow/DelayedTermination.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Subscription\\Flow","location":[11,0,11,31]},{"kind":1,"name":"TResponse","modifiers":4096,"location":[13,5,13,22],"associated":[{"kind":1,"name":"HH\\Http\\TResponse"}]},{"kind":1,"name":"MailSubscription","modifiers":4096,"location":[14,5,14,37],"associated":[{"kind":1,"name":"HH\\Mail\\Service\\MailSubscription"}]},{"kind":1,"name":"SubscriptionCancel","modifiers":4096,"location":[15,5,15,63],"associated":[{"kind":1,"name":"HH\\Subscription\\Model\\Actions\\Cancel"}]},{"kind":1,"name":"SubscriptionWrapper","modifiers":4096,"location":[16,5,16,57],"associated":[{"kind":1,"name":"HH\\Subscription\\Model\\Wrapper"}]},{"kind":1,"name":"ISession","modifiers":4096,"location":[17,5,17,33],"associated":[{"kind":1,"name":"Huli\\Authentication\\ISession"}]},{"kind":1,"name":"IProcessor","modifiers":4096,"location":[18,5,18,23],"associated":[{"kind":1,"name":"Payment\\IProcessor"}]},{"kind":1,"name":"HH\\Subscription\\Flow\\DelayedTermination","location":[32,0,189,1],"associated":[{"kind":2,"name":"HH\\Subscription\\Flow\\IFlow"},{"kind":4,"name":"HH\\Http\\TResponse"}],"description":"Subscriptions flow: DELAYED TERMINATION\n\nCancels subscription but leaves it active so a user can continue to access\nthe product as long as required.\n\nConsider using \\HH\\Subscription\\Flow\\Unsubscribe instead of calling this\nflow directly.\n\nNo differences for user with SaaS instances. Only supports termination\nfor doctor users.","children":[{"kind":1024,"name":"ERROR_CANCEL_SUB","modifiers":1,"location":[37,10,37,63],"scope":"HH\\Subscription\\Flow\\DelayedTermination","value":"'unable_to_cancel_subscription_%s'"},{"kind":1024,"name":"ERROR_CANCEL_PROC","modifiers":1,"location":[38,10,38,62],"scope":"HH\\Subscription\\Flow\\DelayedTermination","value":"'unable_to_cancel_remote_sub_%s'"},{"kind":16,"name":"$params","modifiers":4,"location":[45,12,45,26],"scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"mixed"},{"kind":16,"name":"$session","modifiers":4,"location":[52,12,52,20],"scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"Huli\\Authentication\\ISession"},{"kind":16,"name":"$sub","modifiers":4,"location":[59,12,59,16],"scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"HH\\Subscription\\Model\\Wrapper"},{"kind":16,"name":"$pay_proc","modifiers":4,"location":[66,12,66,21],"scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"Payment\\IProcessor"},{"kind":32,"name":"__construct","modifiers":1,"location":[80,4,86,5],"description":"Flow constructor as setup","scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"HH\\Subscription\\Flow\\Unsubscribe","children":[{"kind":128,"name":"$session","location":[80,32,80,49],"scope":"__construct","typeSource":1,"type":"Huli\\Authentication\\ISession"},{"kind":128,"name":"$params","location":[80,51,80,58],"description":"setup params\n- id_user             int      doctor user id\n- reason_key          string\n- reason_text         string","scope":"__construct","type":"object"},{"kind":128,"name":"$pay_proc","location":[80,60,80,80],"scope":"__construct","typeSource":1,"type":"Payment\\IProcessor"}]},{"kind":32,"name":"execute","modifiers":1,"location":[93,4,100,5],"description":"Flow execution trigger","scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"bool"},{"kind":32,"name":"notify","modifiers":1,"location":[108,4,115,5],"description":"Flow notifications trigger\nUsed mostly for trigger events like emails","scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"bool"},{"kind":32,"name":"cancel_local","modifiers":4,"location":[123,4,142,5],"description":"Cancels the subscription params and established the causes of the\ncancellation.","scope":"HH\\Subscription\\Flow\\DelayedTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\DelayedTermination"},{"kind":32,"name":"cancel_in_processor","modifiers":4,"location":[150,4,170,5],"description":"Cancels the subscription in Stripe by marking the option \"at_period_end\"\nas true.","scope":"HH\\Subscription\\Flow\\DelayedTermination","typeSource":1,"type":"HH\\Subscription\\Flow\\DelayedTermination"},{"kind":32,"name":"send_email","modifiers":4,"location":[178,4,188,5],"description":"Requests an email to be send to doctor and admin notifying them about\nimminent unsubscription.","scope":"HH\\Subscription\\Flow\\DelayedTermination","type":"HH\\Subscription\\Flow\\Unsubscribe"}]}]}}