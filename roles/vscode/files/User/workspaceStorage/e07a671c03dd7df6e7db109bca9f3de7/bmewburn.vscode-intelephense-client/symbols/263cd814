{"uri":"file:///Users/vega/Code/huli/manager-web/src/library/HH/Request/Handler/UserSubscription/Addon/Save.php","root":{"kind":0,"name":"","children":[{"kind":512,"name":"HH\\Request\\Handler\\UserSubscription\\Addon","location":[11,0,11,52]},{"kind":1,"name":"AAlter","modifiers":4096,"location":[13,5,13,31],"associated":[{"kind":1,"name":"HH\\Request\\Behavior\\AAlter"}]},{"kind":1,"name":"Date","modifiers":4096,"location":[14,5,14,17],"associated":[{"kind":1,"name":"HH\\Util\\Date"}]},{"kind":1,"name":"Feature","modifiers":4096,"location":[15,5,15,31],"associated":[{"kind":1,"name":"Huli\\Authorization\\Feature"}]},{"kind":1,"name":"Number","modifiers":4096,"location":[16,5,16,21],"associated":[{"kind":1,"name":"Huli\\Util\\Number"}]},{"kind":1,"name":"Status","modifiers":4096,"location":[17,5,17,21],"associated":[{"kind":1,"name":"Huli\\Util\\Status"}]},{"kind":1,"name":"AddonTierModel","modifiers":4096,"location":[18,5,18,39],"associated":[{"kind":1,"name":"Model\\Addon\\Tier"}]},{"kind":1,"name":"OrganizationAddonModel","modifiers":4096,"location":[19,5,19,55],"associated":[{"kind":1,"name":"Model\\Organization\\Addon"}]},{"kind":1,"name":"OrganizationModel","modifiers":4096,"location":[20,5,20,44],"associated":[{"kind":1,"name":"Model\\Organization"}]},{"kind":1,"name":"UserSubscriptionModel","modifiers":4096,"location":[21,5,21,53],"associated":[{"kind":1,"name":"Model\\User\\Subscription"}]},{"kind":1,"name":"PaymentProcessor","modifiers":4096,"location":[22,5,22,29],"associated":[{"kind":1,"name":"Payment\\PaymentProcessor"}]},{"kind":1,"name":"Util","modifiers":4096,"location":[23,5,23,17],"associated":[{"kind":1,"name":"Payment\\Util"}]},{"kind":1,"name":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","modifiers":8,"location":[28,0,313,1],"associated":[{"kind":1,"name":"HH\\Request\\Behavior\\AAlter"}],"description":"Saves any change in the addon configuration for an account (organization).","children":[{"kind":1024,"name":"CANCELLED","modifiers":1,"location":[33,10,33,33],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","value":"'cancelled'"},{"kind":16,"name":"$id_addon_tier","modifiers":2,"location":[40,14,40,28],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"int"},{"kind":16,"name":"$id_user","modifiers":2,"location":[47,14,47,22],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"int"},{"kind":16,"name":"$id_organization_addon","modifiers":2,"location":[54,14,54,36],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"int"},{"kind":16,"name":"$cancelled","modifiers":2,"location":[61,14,61,24],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"bool"},{"kind":16,"name":"$fixed_price","modifiers":2,"location":[68,14,68,26],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"float"},{"kind":16,"name":"$fixed_allocation","modifiers":2,"location":[75,14,75,31],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"int"},{"kind":16,"name":"$metered_price","modifiers":2,"location":[82,14,82,28],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"float"},{"kind":16,"name":"$status","modifiers":2,"location":[89,14,89,21],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"int"},{"kind":32,"name":"get_request_fields","modifiers":1,"location":[94,4,105,5],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save"},{"kind":32,"name":"get_children_requests","modifiers":1,"location":[110,4,113,5],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save"},{"kind":32,"name":"include_last_insert_id","modifiers":2,"location":[118,4,121,5],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save"},{"kind":32,"name":"get_primary_key","modifiers":2,"location":[126,4,129,5],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save"},{"kind":32,"name":"get_handler_type","modifiers":2,"location":[134,4,137,5],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save"},{"kind":32,"name":"alter","modifiers":2,"location":[142,4,150,5],"scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save"},{"kind":32,"name":"set_id_addon_tier","modifiers":2,"location":[157,4,163,5],"description":"Sets and validates the addon tier.","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","children":[{"kind":128,"name":"$id","location":[157,41,157,44],"scope":"set_id_addon_tier"}]},{"kind":32,"name":"set_fixed_price","modifiers":2,"location":[170,4,178,5],"description":"Sets and validates the price per month","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","children":[{"kind":128,"name":"$amount","location":[170,39,170,46],"scope":"set_fixed_price","type":"string"}]},{"kind":32,"name":"set_metered_price","modifiers":2,"location":[185,4,193,5],"description":"Sets and validates the metered/per item price","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","children":[{"kind":128,"name":"$amount","location":[185,41,185,48],"scope":"set_metered_price","type":"string"}]},{"kind":32,"name":"set_fixed_allocation","modifiers":2,"location":[200,4,207,5],"description":"Sets the number of alloted items for the fixed price","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","children":[{"kind":128,"name":"$amount","location":[200,44,200,51],"scope":"set_fixed_allocation","type":"string"}]},{"kind":32,"name":"set_cancelled","modifiers":2,"location":[214,4,217,5],"description":"Sets and validates the whether the addon is cancelled","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","children":[{"kind":128,"name":"$cancelled","location":[214,37,214,47],"scope":"set_cancelled"}]},{"kind":32,"name":"has_access","modifiers":2,"location":[224,4,227,5],"description":"Validates user has access for editing subscriptions","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"bool"},{"kind":32,"name":"save","modifiers":4,"location":[234,4,250,5],"description":"Saves a new addon for the given org owner","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"bool"},{"kind":32,"name":"update","modifiers":4,"location":[259,4,276,5],"description":"Updates an addon for the given org owner. Basically the only field that\ncan be edited is the status, when the addon is cancelled, the remaining\ntime is set according to the values stored in Stripe.","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"bool"},{"kind":32,"name":"parse_date","modifiers":4,"location":[288,4,312,5],"description":"Retrieves the MYSQL-formatted date to be used as the end date for the\naddon. In the case the user doesn't have a stripe subscription, the addon\nwill be terminated right away, otherwise the enabled_until date will be\nthe end date for the current billing period.","scope":"HH\\Request\\Handler\\UserSubscription\\Addon\\Save","type":"string","children":[{"kind":128,"name":"$model","location":[288,32,288,61],"scope":"parse_date","typeSource":1,"type":"Model\\Organization\\Addon"}]}]}]}}